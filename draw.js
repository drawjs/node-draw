!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=195)}([function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(7),o=n(99),i=n(100),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:a:u&&u in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(45),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(97),o=n(103);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(49),o=n(122),i=n(9);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){var r=n(3).Symbol;t.exports=r},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(44),o=n(28);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){var r=n(87),o=n(88),i=n(89),a=n(90),s=n(91);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(22);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(5)(Object,"create");t.exports=r},function(t,e,n){var r=n(112);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(47),o=n(25);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],p=i?i(n[c],t[c],c,n,t):void 0;void 0===p&&(p=t[c]),a?o(n,c,p):r(n,c,p)}return n}},function(t,e,n){(function(t){var r=n(45),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(27)(t))},function(t,e,n){var r=n(133),o=n(23),i=n(134),a=n(60),s=n(135),u=n(2),c=n(46),p=c(r),l=c(o),f=c(i),h=c(a),g=c(s),d=u;(r&&"[object DataView]"!=d(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=d(new o)||i&&"[object Promise]"!=d(i.resolve())||a&&"[object Set]"!=d(new a)||s&&"[object WeakMap]"!=d(new s))&&(d=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case p:return"[object DataView]";case l:return"[object Map]";case f:return"[object Promise]";case h:return"[object Set]";case g:return"[object WeakMap]"}return e}),t.exports=d},function(t,e,n){var r=n(2),o=n(0),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&r(t)==i}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(18),o=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},function(t,e,n){var r=n(11),o=n(92),i=n(93),a=n(94),s=n(95),u=n(96);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(5)(n(3),"Map");t.exports=r},function(t,e,n){var r=n(104),o=n(111),i=n(113),a=n(114),s=n(115);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(48);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){(function(t){var r=n(3),o=n(120),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||o;t.exports=u}).call(this,n(27)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(130),o=n(55),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return i.call(t,e)}))}:o;t.exports=s},function(t,e,n){var r=n(53)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(61);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(2),o=n(1),i=n(0),a="[object String]";t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&r(t)==a}},function(t,e,n){var r=n(152),o=n(6);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(24),o=n(153),i=n(154);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(170),o=n(178),i=n(38),a=n(1),s=n(188);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?a(t)?o(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(1),o=n(18),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||a.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e){t.exports=function(t){return null===t}},function(t,e,n){var r=n(86),o=1,i=4;t.exports=function(t){return r(t,o|i)}},function(t,e,n){var r=n(2),o=n(4),i="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==a||e==s||e==i||e==u}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(98))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(25),o=n(22),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(5),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(118),o=n(50),i=n(1),a=n(26),s=n(51),u=n(52),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),p=!n&&o(t),l=!n&&!p&&a(t),f=!n&&!p&&!l&&u(t),h=n||p||l||f,g=h?r(t.length,String):[],d=g.length;for(var y in t)!e&&!c.call(t,y)||h&&("length"==y||l&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,d))||g.push(y);return g}},function(t,e,n){var r=n(119),o=n(0),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?n:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(121),o=n(8),i=n(16),a=i&&i.isTypedArray,s=a?o(a):r;t.exports=s},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(49),o=n(125),i=n(9);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(57),o=n(31),i=n(30),a=n(55),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(59),o=n(30),i=n(6);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(57),o=n(1);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(5)(n(3),"Set");t.exports=r},function(t,e,n){var r=n(3).Uint8Array;t.exports=r},function(t,e,n){var r=n(63),o=n(9),i=n(33),a=n(65),s=n(34),u=Math.max;t.exports=function(t,e,n,c){t=o(t)?t:s(t),n=n&&!c?a(n):0;var p=t.length;return n<0&&(n=u(p+n,0)),i(t)?n<=p&&t.indexOf(e,n)>-1:!!p&&r(t,e,n)>-1}},function(t,e,n){var r=n(64),o=n(148),i=n(149);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(150);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(67);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r=n(35),o=n(68),i=n(69),a=n(36),s=n(155),u=n(37),c=200;t.exports=function(t,e,n){var p=-1,l=o,f=t.length,h=!0,g=[],d=g;if(n)h=!1,l=i;else if(f>=c){var y=e?null:s(t);if(y)return u(y);h=!1,l=a,d=new r}else d=e?[]:g;t:for(;++p<f;){var v=t[p],b=e?e(v):v;if(v=n||0!==v?v:0,h&&b==b){for(var m=d.length;m--;)if(d[m]===b)continue t;e&&d.push(b),g.push(v)}else l(d,b,n)||(d!==g&&d.push(b),g.push(v))}return g}},function(t,e,n){var r=n(63);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(67);t.exports=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?r(t,void 0,e):[]}},function(t,e,n){var r=n(19),o=n(157),i=n(158),a=n(165),s=i(function(t){var e=r(t,a);return e.length&&e[0]===t[0]?o(e):[]});t.exports=s},function(t,e,n){var r=n(25),o=n(167),i=n(39);t.exports=function(t,e){var n={};return e=i(e,3),o(t,function(t,o,i){r(n,o,e(t,o,i))}),n}},function(t,e,n){var r=n(172),o=n(0);t.exports=function t(e,n,i,a,s){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,s))}},function(t,e,n){var r=n(35),o=n(173),i=n(36),a=1,s=2;t.exports=function(t,e,n,u,c,p){var l=n&a,f=t.length,h=e.length;if(f!=h&&!(l&&h>f))return!1;var g=p.get(t);if(g&&p.get(e))return g==e;var d=-1,y=!0,v=n&s?new r:void 0;for(p.set(t,e),p.set(e,t);++d<f;){var b=t[d],m=e[d];if(u)var P=l?u(m,b,d,e,t,p):u(b,m,d,t,e,p);if(void 0!==P){if(P)continue;y=!1;break}if(v){if(!o(e,function(t,e){if(!i(v,e)&&(b===t||c(b,t,n,u,p)))return v.push(e)})){y=!1;break}}else if(b!==m&&!c(b,m,n,u,p)){y=!1;break}}return p.delete(t),p.delete(e),y}},function(t,e,n){var r=n(4);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){var r=n(78),o=n(20);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(1),o=n(40),i=n(180),a=n(183);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e,n){var r=n(2),o=n(31),i=n(0),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,p=u.hasOwnProperty,l=c.call(Object);t.exports=function(t){if(!i(t)||r(t)!=a)return!1;var e=o(t);if(null===e)return!0;var n=p.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},function(t,e,n){var r=n(2),o=n(0),i="[object Number]";t.exports=function(t){return"number"==typeof t||o(t)&&r(t)==i}},function(t,e,n){var r=n(2),o=n(0),i="[object Boolean]";t.exports=function(t){return!0===t||!1===t||o(t)&&r(t)==i}},function(t,e,n){var r=n(191),o=n(8),i=n(16),a=i&&i.isDate,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(192)(n(193));t.exports=r},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjQ4MS45NXB4IiBoZWlnaHQ9IjQ4MS45NXB4IiB2aWV3Qm94PSIwIDAgNDgxLjk1IDQ4MS45NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDgxLjk1IDQ4MS45NTsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9InJvdGF0ZS1sZWZ0Ij4NCgkJPHBhdGggZmlsbD0iZGVlcFNreUJsdWUiIGQ9Ik0xMTQuNzUsMTkxLjI1bC0zNS43LTM1LjdDNTYuMSwxODYuMTUsNDAuOCwyMTkuMywzOC4yNSwyNTVoNTFDOTEuOCwyMzIuMDUsMTAyLDIxMS42NSwxMTQuNzUsMTkxLjI1eiBNODkuMjUsMzA2aC01MQ0KCQkJYzUuMSwzNS43LDE3Ljg1LDY4Ljg1LDQwLjgsOTkuNDVsMzUuNy0zNS43QzEwMiwzNDkuMzUsOTEuOCwzMjguOTUsODkuMjUsMzA2eiBNMTE0Ljc1LDQ0MS4xNQ0KCQkJYzMwLjYsMjIuOTQ5LDYzLjc1LDM1LjY5OSw5OS40NSw0MC44di01MWMtMjIuOTUtMi41NS00My4zNS0xMi43NS02My43NS0yNS41TDExNC43NSw0NDEuMTV6IE0yNjUuMiw3OS4wNVYwTDE1MC40NSwxMTQuNzUNCgkJCUwyNjUuMiwyMjkuNXYtOTkuNDVjNzEuNCwxMi43NSwxMjcuNSw3My45NSwxMjcuNSwxNTAuNDVzLTU2LjEsMTM3LjctMTI3LjUsMTUwLjQ1djUxYzk5LjQ1LTEyLjc1LDE3OC41LTk5LjQ1LDE3OC41LTIwMS40NQ0KCQkJUzM2NC42NSw5MS44LDI2NS4yLDc5LjA1eiIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K"},function(t,e,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){return function t(e,n,r){var o,i,a=window,s="application/octet-stream",u=r||s,c=e,p=!n&&!r&&c,l=document.createElement("a"),f=function(t){return String(t)},h=a.Blob||a.MozBlob||a.WebKitBlob||f,g=n||"download";if(h=h.call?h.bind(a):Blob,"true"===String(this)&&(u=(c=[c,u])[0],c=c[1]),p&&p.length<2048&&(g=p.split("/").pop().split("?")[0],l.href=p,-1!==l.href.indexOf(p))){var d=new XMLHttpRequest;return d.open("GET",p,!0),d.responseType="blob",d.onload=function(e){t(e.target.response,g,s)},setTimeout(function(){d.send()},0),d}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(c)){if(!(c.length>2096103.424&&h!==f))return navigator.msSaveBlob?navigator.msSaveBlob(y(c),g):v(c);c=y(c),u=c.type||s}function y(t){for(var e=t.split(/[:;,]/),n=e[1],r="base64"==e[2]?atob:decodeURIComponent,o=r(e.pop()),i=o.length,a=0,s=new Uint8Array(i);a<i;++a)s[a]=o.charCodeAt(a);return new h([s],{type:n})}function v(t,e){if("download"in l)return l.href=t,l.setAttribute("download",g),l.className="download-js-link",l.innerHTML="downloading...",l.style.display="none",document.body.appendChild(l),setTimeout(function(){l.click(),document.body.removeChild(l),!0===e&&setTimeout(function(){a.URL.revokeObjectURL(l.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return t=t.replace(/^data:([\w\/\-\+]+)/,s),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(o=c instanceof h?c:new h([c],{type:u}),navigator.msSaveBlob)return navigator.msSaveBlob(o,g);if(a.URL)v(a.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===f)try{return v("data:"+u+";base64,"+a.btoa(o))}catch(t){return v("data:"+u+","+encodeURIComponent(o))}(i=new FileReader).onload=function(t){v(this.result)},i.readAsDataURL(o)}return!0}})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){var r=n(21),o=n(116),i=n(47),a=n(117),s=n(124),u=n(127),c=n(128),p=n(129),l=n(131),f=n(58),h=n(132),g=n(17),d=n(136),y=n(137),v=n(142),b=n(1),m=n(26),P=n(144),_=n(4),w=n(146),x=n(6),O=1,S=2,j=4,C="[object Arguments]",L="[object Function]",T="[object GeneratorFunction]",E="[object Object]",A={};A[C]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[E]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[L]=A["[object WeakMap]"]=!1,t.exports=function t(e,n,D,M,I,R){var k,N=n&O,z=n&S,B=n&j;if(D&&(k=I?D(e,M,I,R):D(e)),void 0!==k)return k;if(!_(e))return e;var U=b(e);if(U){if(k=d(e),!N)return c(e,k)}else{var H=g(e),F=H==L||H==T;if(m(e))return u(e,N);if(H==E||H==C||F&&!I){if(k=z||F?{}:v(e),!N)return z?l(e,s(k,e)):p(e,a(k,e))}else{if(!A[H])return I?e:{};k=y(e,H,N)}}R||(R=new r);var Y=R.get(e);if(Y)return Y;if(R.set(e,k),w(e))return e.forEach(function(r){k.add(t(r,n,D,r,e,R))}),k;if(P(e))return e.forEach(function(r,o){k.set(o,t(r,n,D,o,e,R))}),k;var W=B?z?h:f:z?keysIn:x,K=U?void 0:W(e);return o(K||e,function(r,o){K&&(r=e[o=r]),i(k,o,t(r,n,D,o,e,R))}),k}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(12),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(12);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(12);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(12);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(11);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(11),o=n(23),i=n(24),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!o||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(44),o=n(101),i=n(4),a=n(46),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,p=u.toString,l=c.hasOwnProperty,f=RegExp("^"+p.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?f:s).test(a(t))}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(7),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[s]=n:delete t[s]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(102),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(3)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(105),o=n(11),i=n(23);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(106),o=n(107),i=n(108),a=n(109),s=n(110);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(13);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(13),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(13),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(13),o="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}},function(t,e,n){var r=n(14);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(14);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(14);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(14);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(15),o=n(6);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(2),o=n(0),i="[object Arguments]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(2),o=n(28),i=n(0),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(29),o=n(123),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(53)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(15),o=n(54);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(4),o=n(29),i=n(126),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(3),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(27)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(15),o=n(30);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e,n){var r=n(15),o=n(56);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(59),o=n(56),i=n(54);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(5)(n(3),"DataView");t.exports=r},function(t,e,n){var r=n(5)(n(3),"Promise");t.exports=r},function(t,e,n){var r=n(5)(n(3),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(32),o=n(138),i=n(139),a=n(140),s=n(141),u="[object Boolean]",c="[object Date]",p="[object Map]",l="[object Number]",f="[object RegExp]",h="[object Set]",g="[object String]",d="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",m="[object Float64Array]",P="[object Int8Array]",_="[object Int16Array]",w="[object Int32Array]",x="[object Uint8Array]",O="[object Uint8ClampedArray]",S="[object Uint16Array]",j="[object Uint32Array]";t.exports=function(t,e,n){var C=t.constructor;switch(e){case y:return r(t);case u:case c:return new C(+t);case v:return o(t,n);case b:case m:case P:case _:case w:case x:case O:case S:case j:return s(t,n);case p:return new C;case l:case g:return new C(t);case f:return i(t);case h:return new C;case d:return a(t)}}},function(t,e,n){var r=n(32);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(7),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(32);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(143),o=n(31),i=n(29);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(4),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){var r=n(145),o=n(8),i=n(16),a=i&&i.isMap,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(17),o=n(0),i="[object Map]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(147),o=n(8),i=n(16),a=i&&i.isSet,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(17),o=n(0),i="[object Set]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(151),o=1/0,i=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===o||t===-o?(t<0?-1:1)*i:t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(4),o=n(18),i=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,p=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return i;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=u.test(t);return n||c.test(t)?p(t.slice(2),n?2:8):s.test(t)?i:+t}},function(t,e,n){var r=n(19);t.exports=function(t,e){return r(e,function(e){return t[e]})}},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(60),o=n(156),i=n(37),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(35),o=n(68),i=n(69),a=n(19),s=n(8),u=n(36),c=Math.min;t.exports=function(t,e,n){for(var p=n?i:o,l=t[0].length,f=t.length,h=f,g=Array(f),d=1/0,y=[];h--;){var v=t[h];h&&e&&(v=a(v,s(e))),d=c(v.length,d),g[h]=!n&&(e||l>=120&&v.length>=120)?new r(h&&v):void 0}v=t[0];var b=-1,m=g[0];t:for(;++b<l&&y.length<d;){var P=v[b],_=e?e(P):P;if(P=n||0!==P?P:0,!(m?u(m,_):p(y,_,n))){for(h=f;--h;){var w=g[h];if(!(w?u(w,_):p(t[h],_,n)))continue t}m&&m.push(_),y.push(P)}}return y}},function(t,e,n){var r=n(38),o=n(159),i=n(161);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){var r=n(160),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,s=o(i.length-e,0),u=Array(s);++a<s;)u[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(u),r(t,this,c)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(162),o=n(164)(r);t.exports=o},function(t,e,n){var r=n(163),o=n(48),i=n(38),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,o=Date.now;t.exports=function(t){var e=0,i=0;return function(){var a=o(),s=r-(a-i);if(i=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(166);t.exports=function(t){return r(t)?t:[]}},function(t,e,n){var r=n(9),o=n(0);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(168),o=n(6);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(169)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===n(i[u],u,i))break}return e}}},function(t,e,n){var r=n(171),o=n(177),i=n(76);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(21),o=n(73),i=1,a=2;t.exports=function(t,e,n,s){var u=n.length,c=u,p=!s;if(null==t)return!c;for(t=Object(t);u--;){var l=n[u];if(p&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++u<c;){var f=(l=n[u])[0],h=t[f],g=l[1];if(p&&l[2]){if(void 0===h&&!(f in t))return!1}else{var d=new r;if(s)var y=s(h,g,f,t,e,d);if(!(void 0===y?o(g,h,i|a,s,d):y))return!1}}return!0}},function(t,e,n){var r=n(21),o=n(74),i=n(174),a=n(176),s=n(17),u=n(1),c=n(26),p=n(52),l=1,f="[object Arguments]",h="[object Array]",g="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,y,v,b){var m=u(t),P=u(e),_=m?h:s(t),w=P?h:s(e),x=(_=_==f?g:_)==g,O=(w=w==f?g:w)==g,S=_==w;if(S&&c(t)){if(!c(e))return!1;m=!0,x=!1}if(S&&!x)return b||(b=new r),m||p(t)?o(t,e,n,y,v,b):i(t,e,_,n,y,v,b);if(!(n&l)){var j=x&&d.call(t,"__wrapped__"),C=O&&d.call(e,"__wrapped__");if(j||C){var L=j?t.value():t,T=C?e.value():e;return b||(b=new r),v(L,T,n,y,b)}}return!!S&&(b||(b=new r),a(t,e,n,y,v,b))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(7),o=n(61),i=n(22),a=n(74),s=n(175),u=n(37),c=1,p=2,l="[object Boolean]",f="[object Date]",h="[object Error]",g="[object Map]",d="[object Number]",y="[object RegExp]",v="[object Set]",b="[object String]",m="[object Symbol]",P="[object ArrayBuffer]",_="[object DataView]",w=r?r.prototype:void 0,x=w?w.valueOf:void 0;t.exports=function(t,e,n,r,w,O,S){switch(n){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!O(new o(t),new o(e)));case l:case f:case d:return i(+t,+e);case h:return t.name==e.name&&t.message==e.message;case y:case b:return t==e+"";case g:var j=s;case v:var C=r&c;if(j||(j=u),t.size!=e.size&&!C)return!1;var L=S.get(t);if(L)return L==e;r|=p,S.set(t,e);var T=a(j(t),j(e),r,w,O,S);return S.delete(t),T;case m:if(x)return x.call(t)==x.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e,n){var r=n(58),o=1,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,s,u){var c=n&o,p=r(t),l=p.length;if(l!=r(e).length&&!c)return!1;for(var f=l;f--;){var h=p[f];if(!(c?h in e:i.call(e,h)))return!1}var g=u.get(t);if(g&&u.get(e))return g==e;var d=!0;u.set(t,e),u.set(e,t);for(var y=c;++f<l;){var v=t[h=p[f]],b=e[h];if(a)var m=c?a(b,v,h,e,t,u):a(v,b,h,t,e,u);if(!(void 0===m?v===b||s(v,b,n,a,u):m)){d=!1;break}y||(y="constructor"==h)}if(d&&!y){var P=t.constructor,_=e.constructor;P!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof P&&P instanceof P&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return u.delete(t),u.delete(e),d}},function(t,e,n){var r=n(75),o=n(6);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(73),o=n(179),i=n(185),a=n(40),s=n(75),u=n(76),c=n(20),p=1,l=2;t.exports=function(t,e){return a(t)&&s(e)?u(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,p|l)}}},function(t,e,n){var r=n(77);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=n(181)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=i},function(t,e,n){var r=n(182),o=500;t.exports=function(t){var e=r(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(24),o="Expected a function";function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(184);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(7),o=n(19),i=n(1),a=n(18),s=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},function(t,e,n){var r=n(186),o=n(187);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(78),o=n(50),i=n(1),a=n(51),s=n(28),u=n(20);t.exports=function(t,e,n){for(var c=-1,p=(e=r(e,t)).length,l=!1;++c<p;){var f=u(e[c]);if(!(l=null!=t&&n(t,f)))break;t=t[f]}return l||++c!=p?l:!!(p=null==t?0:t.length)&&s(p)&&a(f,p)&&(i(t)||o(t))}},function(t,e,n){var r=n(189),o=n(190),i=n(40),a=n(20);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(77);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(2),o=n(0),i="[object Date]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(39),o=n(9),i=n(6);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!o(e)){var u=r(n,3);e=i(e),n=function(t){return u(s[t],t,s)}}var c=t(e,n,a);return c>-1?s[u?e[c]:c]:void 0}}},function(t,e,n){var r=n(64),o=n(39),i=n(65),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:i(n);return u<0&&(u=a(s+u,0)),r(t,o(e,3),u)}},,function(t,e,n){"use strict";n.r(e);var r=n(85);function o(){return"drawData-"+function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"-"+t.getHours()+"-"+t.getMinutes()+"-"+t.getSeconds()}()}var i=function(t){var e,n;for(void 0===t&&(t=""),e="",n=0;n<32;n++)8!=n&&12!=n&&16!=n&&20!=n||(e+="-"),e+=Math.floor(16*Math.random()).toString(16).toUpperCase();return t+"-"+e+"-"+(new Date).getTime()};function a(t){var e=t.x,n=t.y,r=Math.atan(Math.abs(n/e));return 0===e&&0===n?0:e>=0&&n>=0?r+Math.PI/2:e<0&&n>=0?Math.PI-r+Math.PI/2:e<0&&n<0?Math.PI+r+Math.PI/2:e>=0&&n<0?-r+Math.PI/2:void 0}var s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function u(t){return s({},t)}var c=function(t,e,n){if(void 0===n&&(n={x:0,y:0}),0===e)return t;var r=u(t),o=e*Math.PI/180,i=r.x-n.x,a=r.y-n.y;return r={x:i*Math.cos(o)-a*Math.sin(o)+n.x,y:i*Math.sin(o)+a*Math.cos(o)+n.y}},p=(window.console.log,n(10)),l=n.n(p),f=function(t){return!l()(t)},h=function(){function t(t){this.id=null;var e=t.draw;this.draw=e,this.id=this.getters.generateUniqueDrawElementId()}return Object.defineProperty(t.prototype,"drawStore",{get:function(){return this.draw.drawStore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getters",{get:function(){return this.draw.getters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actions",{get:function(){return this.draw.actions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharedGetters",{get:function(){return this.draw.sharedGetters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharedActions",{get:function(){return this.draw.sharedActions},enumerable:!0,configurable:!0}),t.prototype.remove=function(){this.actions.REMOVE_ELEMENT(this)},t}(),g=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=Math.min,y=Math.max,v=(Math.abs,function(t){function e(e){var n=t.call(this,e)||this;return n.shouldSelect=!1,n}return g(e,t),Object.defineProperty(e.prototype,"path",{get:function(){var t=new Path2D,e=this.left,n=this.top,r=this.width,o=this.height;return t.rect(e,n,r,o),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return Math.min(this.startPoint.x,this.endPoint.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return Math.min(this.startPoint.y,this.endPoint.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.endPoint.x-this.startPoint.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.endPoint.y-this.startPoint.y)},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx;f(this.startPoint)&&f(this.endPoint)&&(t.save(),t.fillStyle="rgba(37, 145, 293, 0.1)",t.fill(this.path),t.lineWidth=1,t.strokeStyle="#b1b1f3",t.stroke(this.path),t.restore())},e.prototype.boundsInSelectionArea=function(t){var e=!1,n=t.left,r=t.right,o=t.top,i=t.bottom,a=this.startPoint,s=this.endPoint;if(f(a)&&f(s)){var u=d(a.x,s.x),c=y(a.x,s.x),p=d(a.y,s.y),l=y(a.y,s.y);e=n>=u&&r<=c&&o>=p&&i<=l}return e},e}(h)),b=n(42),m=n.n(b),P=n(41),_=n.n(P),w=n(1),x=n.n(w),O=(n(4),n(43)),S=n.n(O),j=n(62),C=n.n(j),L=n(66),T=n.n(L),E=(n(70),n(71)),A=n.n(E),D=n(72),M=n.n(D),I=n(34),R=n.n(I),k=n(79),N=n.n(k),z=n(80),B=n.n(z),U=n(81),H=n.n(U),F=n(33),Y=n.n(F),W=n(82),K=n.n(W),V=n(83),X=n.n(V),G=function(t){return!l()(t)},Z=function(t){return!_()(t)},Q=function(){function t(){this.keyboardKeysPressing=[],window.addEventListener("keydown",this._keydownListener.bind(this)),window.addEventListener("keyup",this._keyupListener.bind(this))}return Object.defineProperty(t.prototype,"isAltPressing",{get:function(){return C()(this.keyboardKeysPressing,t.KEYBOARD_KEYS.ALT)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpacePressing",{get:function(){return C()(this.keyboardKeysPressing,t.KEYBOARD_KEYS.SPACE)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnterPressing",{get:function(){return C()(this.keyboardKeysPressing,t.KEYBOARD_KEYS.ENTER)},enumerable:!0,configurable:!0}),t.prototype._keydownListener=function(t){var e=t.key;this._addToKeyboardKeysPressing(e),this.handleKeyDown&&this.handleKeyDown(t)},t.prototype._keyupListener=function(t){var e=t.key;this._removeFromKeyboardKeysPressing(e)},t.prototype._addToKeyboardKeysPressing=function(t){this.keyboardKeysPressing=T()(this.keyboardKeysPressing.concat([t]))},t.prototype._removeFromKeyboardKeysPressing=function(t){this.keyboardKeysPressing=this.keyboardKeysPressing.filter(function(e){return e!==t})},t.prototype.handleKeyDown=function(t){},t.KEYBOARD_KEYS={ALT:"Alt",SPACE:" ",ENTER:"Enter"},t}();var J,$=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(t){function e(e){var n=t.call(this,e)||this,r=n.getters,o=r.canvas,i=r.textInput;return n.eventKeyboard=new Q,o.removeEventListener("mousedown",n.mousedownListener.bind(n)),o.addEventListener("mousedown",n.mousedownListener.bind(n)),o.removeEventListener("mousemove",n.mousemoveListener.bind(n)),o.addEventListener("mousemove",n.mousemoveListener.bind(n)),o.removeEventListener("mouseup",n.mouseupListener.bind(n)),o.addEventListener("mouseup",n.mouseupListener.bind(n)),o.removeEventListener("click",n.clickListener.bind(n)),o.addEventListener("click",n.clickListener.bind(n)),o.removeEventListener("dblclick",n.dblclickListener.bind(n)),o.addEventListener("dblclick",n.dblclickListener.bind(n)),o.removeEventListener("mousewheel",n.mousewheelListener.bind(n)),o.addEventListener("mousewheel",n.mousewheelListener.bind(n)),G(i)&&i.bindEvents(),n.eventKeyboard.handleKeyDown=n.keyBoardDownListener.bind(n),n}return $(e,t),e.prototype.updatePrevHovingDsElement=function(t){this.prevHovingDsElement=t},e.prototype.mousedownListener=function(t){var e=this.getters,n=this.actions,r=e.getInitialPoint(t);return this.eventKeyboard.isSpacePressing||function(t){return t&&(2==t.which||4==t.button)}(t)?e.viewPort.startPan(t):e.pointOnEmpty(r)?(n.DESELECT_ALL_CELLS(),this.interfaceOnEmptyClick&&this.interfaceOnEmptyClick(t),void this.startSelect(t)):e.pointOnSelectionExcludingCells(r)?void n.START_DRAG_MOST_TOP_CELL_FOCUSED(t):e.pointOnCellDeselected(r)?(n.DESELECT_ALL_CELLS(),n.SELECT_MOST_TOP_CELL_FOCUSED(r),void n.START_DRAG_MOST_TOP_CELL_FOCUSED(t)):void(e.pointOnCellSelected(r)?n.START_DRAG_CELLS_SHOULD_SELECT(t):e.draw.render())},e.prototype.mousemoveListener=function(t){var e=this.getters;!e.viewPort.shouldPan&&e.selector.shouldSelect&&this.selecting(t),e.viewPort.shouldPan&&e.viewPort.panning(t),this.actions.DRAGGING_CELLS_SHOULD_DRAG(t),this.actions.HOVER_MOST_TOP_CELL_FOCUSED(t,this),e.draw.render()},e.prototype.mouseupListener=function(t){var e=this.getters,n=this.actions;e.selector.shouldSelect=!1,this.stopSelect(t),n.STOP_DRAG_CELLS_SHOULD_DRAG(t),e.viewPort.stopPan(),e.draw.render()},e.prototype.mousewheelListener=function(t){var e=this.getters;t.preventDefault();e.eventKeyboard;var n=e.getPoint(t),r=t.deltaX,o=t.deltaY;(r<0||o<0)&&e.viewPort.zoomIn(n),(r>0||o>0)&&e.viewPort.zoomOut(n)},e.prototype.clickListener=function(t){this.actions.CLICK_MOST_TOP_CELL_FOCUSED(t)},e.prototype.dblclickListener=function(t){this.actions.DOUBLE_CLICK_MOST_TOP_CELL_FOCUSED(t)},e.prototype.keyBoardDownListener=function(t){var e=t.key,n=this.getters.textInput;e===Q.KEYBOARD_KEYS.ENTER&&n.isShowing&&n.hideSelfAndUpdateTarget()},e.prototype.startSelect=function(t){var e=this.getters;e.selector.shouldSelect=!0,e.selector.startPoint=e.getInitialPoint(t)},e.prototype.selecting=function(t){var e=this.getters;e.selector.endPoint=e.getInitialPoint(t)},e.prototype.stopSelect=function(t){var e=this.getters;this.actions.SELECT_CELLS_IN_SELECTOR_RIGION(),e.selector.startPoint=null,e.selector.endPoint=null},e}(h),tt="Page1",et=Math.PI/180,nt=180/Math.PI,rt=50;!function(t){t.HANDLE_IN="HANDLE_IN",t.HANDLE_OUT="HANDLE_OUT"}(J||(J={}));var ot=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=Math.abs,at=Math.max,st=function(t){function e(e){var n=t.call(this,e)||this;return n.shouldPan=!1,n.zoom=1,n.center=n.basicCenter,n}return ot(e,t),Object.defineProperty(e.prototype,"basicCenter",{get:function(){var t=this.getters;return{x:t.canvasWidth/2,y:t.canvasHeight/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicWidth",{get:function(){return this.getters.canvasWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicHeight",{get:function(){return this.getters.canvasHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.basicWidth*this.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.basicHeight*this.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pan",{get:function(){var t=this.center,e=this.basicCenter;return{x:t.x-e.x,y:t.y-e.y}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panX",{get:function(){return this.pan.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panY",{get:function(){return this.pan.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPanning",{get:function(){return function(t){return 2===t.which}(event)||this.getters.eventKeyboard.isSpacePressing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movement",{get:function(){var t=this.width,e=this.height,n=this.basicWidth,r=this.basicHeight,o=this.center,i=o.x,a=o.y,s=this.basicCenter;return{x:i-s.x-(t-n)/2,y:a-s.y-(e-r)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!0,configurable:!0}),e.prototype.zoomBy=function(t,n){void 0===t&&(t={x:0,y:0});var r=this;if(!function(){var t=r.zoom+n,o=e.MAX_ZOOM,i=e.MIN_ZOOM;return t>o||t<i}()){var o=this.zoom;this.zoom=this.zoom+n;this.center,this.basicCenter;var i=this.zoom;this.center=function(t,e,n){void 0===t&&(t={x:0,y:0});var r=t.x,o=t.y;return{x:r+(n.x-r)*e,y:o+(n.y-o)*e}}(t,i/o,this.center),this.draw.render()}},e.prototype.zoomTo=function(t,e){void 0===e&&(e={x:0,y:0});var n=t-this.zoom;this.zoomBy(e,n)},e.prototype.zoomIn=function(t){void 0===t&&(t=this.getters.canvasCenterPoint),this.zoomBy(t,e.ZOOM_VARIATION)},e.prototype.zoomOut=function(t){void 0===t&&(t=this.getters.canvasCenterPoint),this.zoomBy(t,-e.ZOOM_VARIATION)},e.prototype.panBy=function(t,e){var n=this.center,r=n.x,o=n.y;this.center={x:r+t,y:o+e}},e.prototype.getDeltaPointToPrevPanningPoint=function(t){var e=t.x,n=t.y,r=this.prevPanningPoint;return{x:e-r.x,y:n-r.y}},e.prototype.getDeltaXToPrevPanningPoint=function(t){return this.getDeltaPointToPrevPanningPoint(t).x},e.prototype.getDeltaYToPrevPanningPoint=function(t){return this.getDeltaPointToPrevPanningPoint(t).y},e.prototype.startPan=function(t){var e=this.getters.getPoint(t);this.shouldPan=!0,this.prevPanningPoint=e},e.prototype.panning=function(t){var e=this.getters.getPoint(t),n=this.getDeltaXToPrevPanningPoint(e),r=this.getDeltaYToPrevPanningPoint(e);this.prevPanningPoint=e,this.panBy(n,r)},e.prototype.stopPan=function(){this.shouldPan=!1},e.prototype.resetPan=function(){this.center=this.basicCenter},e.prototype.transform=function(t){var e=t.x,n=t.y,r=this.movementX,o=this.movementY,i=this.zoom;return{x:e*i+r,y:n*i+o}},e.prototype.transformToInitial=function(t){var e=t.x,n=t.y,r=this.movementX,o=this.movementY,i=this.zoom;return{x:(e-r)/i,y:(n-o)/i}},e.prototype.centerLayout=function(t){var e=t.left,n=t.top,r=t.right,o=t.bottom;if(![e,n,r,o].some(function(t){return!isFinite(t)})){var i={x:(e+r)/2,y:(n+o)/2},a=it(r-e)+100,s=it(o-n)+100,u=this.getters,c=u.canvasWidth,p=u.canvasHeight,l=u.canvasCenterPoint;this.panCanvasCenterToPoint(i);var f=at(a/c,s/p),h=0!==f?1/f:1;this.zoomTo(h,l)}},e.prototype.panCanvasCenterToPoint=function(t){var e=this.getters.canvasCenterPoint,n=this.transform(t),r=n.x,o=n.y,i=e.x-r,a=e.y-o;this.panBy(i,a)},e.prototype.update=function(t,e){this.zoomTo(t);var n=e.x,r=e.y,o=this.center,i=n-o.x,a=r-o.y;this.panBy(i,a)},e.ZOOM_VARIATION=.5,e.MAX_ZOOM=100,e.MIN_ZOOM=.1,e}(h),ut=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=Math.abs,pt=function(t){function e(n){var r=t.call(this,n)||this;return r.zoom=1,r.pan={x:0,y:0},r.interval=e.INTERVAL,r.canvas=n.canvas,r}return ut(e,t),Object.defineProperty(e.prototype,"ctx",{get:function(){return this.ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panX",{get:function(){return this.pan.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panY",{get:function(){return this.pan.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasWidth",{get:function(){return this.canvas.getBoundingClientRect().width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasHeight",{get:function(){return this.canvas.getBoundingClientRect().height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return(ct(this.panX)+this.canvasWidth)/this.zoom+5*this.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return(ct(this.panY)+this.canvasHeight)/this.zoom+5*this.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return-Math.round(this.panX/this.interval)*this.interval-2*this.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return-Math.round(this.panY/this.interval)*this.interval-2*this.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){for(var t=new Path2D,e=this,n=(e.width,e.height,e.interval),r=e.left,o=e.top,i=e.right,a=e.bottom,s=0,u=0;u<i;s++)u=s*n,t.moveTo(r+u+n,o),t.lineTo(r+u+n,a);s=0;for(var c=0;c<a;s++)c=s*n,t.moveTo(r,o+c+n),t.lineTo(i,o+c+n);return t},enumerable:!0,configurable:!0}),e.prototype.render=function(t,n,r,o){void 0===t&&(t=e.INTERVAL),void 0===n&&(n=e.DEFAULT_ZOOM),void 0===r&&(r=e.DEFAULT_PAN),void 0===o&&(o={});var i=o.color||"black";this.interval=t,this.zoom=n,this.pan=r;var a=this.getters.ctx,s=this.path;a.save(),a.lineWidth=1,a.strokeStyle=i,a.stroke(s),a.restore()},e.INTERVAL=10,e.DEFAULT_ZOOM=1,e.DEFAULT_PAN={x:0,y:0},e}(h),lt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(t){function e(e){return t.call(this,e)||this}return lt(e,t),Object.defineProperty(e.prototype,"ctx",{get:function(){return this.getters.ctx},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.resetTransform(),this.getters.ctx.clearRect(0,0,this.getters.canvasWidth,this.getters.canvasHeight)},e.prototype.resetTransform=function(){this.ctx.setTransform(1,0,0,1,0,0)},e.prototype.setTransformViewPort=function(){var t=this.getters,e=t.zoom,n=t.movementX,r=t.movementY;t.ctx.setTransform(e,0,0,e,n,r)},e.prototype.setTransformViewPortToRenderMiniMap=function(){var t=this.getters,e=t.ctx,n=t.zoom,r=t.movementX,o=t.movementY,i=this.getters.miniMap.viewBox,a=i.initialRatio,s=i.basicLeft,u=i.basicTop;e.setTransform(n/a,0,0,n/a,s+r/a,u+o/a)},e}(h),ht="polygon",gt="rect",dt="line",yt="polyline",vt="point",bt="circle",mt="text",Pt="mini-map",_t="minimap-view-box",wt="rotation-arrow",xt="size-point",Ot=[wt,xt,Pt,_t],St=[wt,xt,Pt,_t],jt=function(){function t(t){this.drawStore=t}return Object.defineProperty(t.prototype,"draw",{get:function(){return this.drawStore.draw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storeActivePanelId",{get:function(){return l()(this.drawStore.activePanelId)?this.drawStore.panels.length>0?this.drawStore.panels[0].id:null:this.drawStore.activePanelId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storeElementsIds",{get:function(){var t=[];if(l()(this.drawStore)||l()(this.drawStore.panels))return[];return this.drawStore.panels.map(function(e){t=t.concat(e.elements)}),t.map(function(t){return t.id})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storeActiveElements",{get:function(){return this.getStoreElementsByPanelId(this.storeActivePanelId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storePanels",{get:function(){return this.drawStore.panels},enumerable:!0,configurable:!0}),t.prototype.generateUniqueDrawRootId=function(){return i("draw")},t.prototype.generateUniqueDrawElementId=function(){var t=this,e=i("draw-el");return e=function e(n){return C()(t.storeElementsIds,n)?e(i()):n}(e)},Object.defineProperty(t.prototype,"cellList",{get:function(){return this.drawStore.cellList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellListShouldRender",{get:function(){return this.miniMap.renderingMainCells?this.cellList.filter(t).filter(function(t){return t.shouldRenderInMiniMap}):this.cellList.filter(t);function t(t){var e=t.type;return!C()(St,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellsShouldSelect",{get:function(){return this.cellList.filter(function(t){return!0===t.shouldSelect})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellsShouldDrag",{get:function(){return this.cellList.filter(function(t){return!0===t.dragger.enable})},enumerable:!0,configurable:!0}),t.prototype.getTopCell=function(t){var e,n=t.x,r=t.y;return this.cellList.map(function(t){!t.isPart&&t.contain(n,r)&&(e=t)}),e},Object.defineProperty(t.prototype,"canvas",{get:function(){return this.drawStore.canvas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasLeft",{get:function(){return this.canvas.getBoundingClientRect().left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasRight",{get:function(){return this.canvas.getBoundingClientRect().right},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasTop",{get:function(){return this.canvas.getBoundingClientRect().top},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasBottom",{get:function(){return this.canvas.getBoundingClientRect().bottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasWidth",{get:function(){return this.canvas.getBoundingClientRect().width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasHeight",{get:function(){return this.canvas.getBoundingClientRect().height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasCenterPoint",{get:function(){return{x:this.canvas.width/2,y:this.canvas.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tmpCanvas",{get:function(){return this.drawStore.tmpCanvas},enumerable:!0,configurable:!0}),t.prototype.pointOnPath=function(t,e){this.renderer.resetTransform();var n=t.x,r=t.y,o=this.ctx.isPointInPath(e,n,r);return this.renderer.setTransformViewPort(),o},t.prototype.getPoint=function(t){return{x:t.x-this.canvasLeft,y:t.y-this.canvasTop}},t.prototype.getInitialPoint=function(t){var e=this.getPoint(t);return this.viewPort.transformToInitial(e)},Object.defineProperty(t.prototype,"viewPort",{get:function(){return this.drawStore.viewPort},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return this.viewPort.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pan",{get:function(){return this.viewPort.pan},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panX",{get:function(){return this.viewPort.pan.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panY",{get:function(){return this.viewPort.pan.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.viewPort.movementX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.viewPort.movementY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this.drawStore.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selector",{get:function(){return this.drawStore.selector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCells",{get:function(){return this.cellList.filter(function(t){return!0===t.shouldSelect})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellsInSelectorRigion",{get:function(){var t=this;return this.cellList.filter(function(t){var e=t.type;return!C()(Ot,e)}).filter(function(t){return!t.isPart}).filter(function(e){var n=e.bounds;return t.selector.boundsInSelectionArea(n)})},enumerable:!0,configurable:!0}),t.prototype.pointOnSelectionExcludingCells=function(t){var e=!1,n=this.getTopCell(t);return f(n)&&(e=C()(Ot,n.type)),e},t.prototype.pointOnCellSelected=function(t){var e=!1,n=this.getTopCell(t);f(n)&&(e=!0===n.shouldSelect);return e},t.prototype.pointOnCellDeselected=function(t){var e=!1,n=this.getTopCell(t);f(n)&&(e=!1===n.shouldSelect);return e},Object.defineProperty(t.prototype,"clonedStoreWithoutCircularObjects",{get:function(){var t=S()(this.drawStore);return delete t.cellList,t.panels.map(function(e,n){e.elements.map(function(e){return function(n,r){delete t.panels[e].elements[r].__instance__}}(n))}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__storeActiveElementsInstances__",{get:function(){return this.storeActiveElements.map(function(t){return t.__instance__})},enumerable:!0,configurable:!0}),t.prototype.getStoreElementsByPanelId=function(t){var e=X()(this.drawStore.panels,{id:t});return l()(e)?[]:e.elements},t.prototype.pointOnEmpty=function(t){var e=this.getTopCell(t);return l()(e)},t.prototype.setCtx=function(t){this.ctx=t},t.prototype.setTmpCtx=function(t){this.tmpCtx=t},Object.defineProperty(t.prototype,"interaction",{get:function(){return this.drawStore.interaction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventKeyboard",{get:function(){return this.interaction.eventKeyboard},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"miniMap",{get:function(){return this.drawStore.miniMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this.drawStore.grid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"testUtils",{get:function(){return this.drawStore.testUtils},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textInput",{get:function(){return this.drawStore.textInput},enumerable:!0,configurable:!0}),t}(),Ct=function(){return function(){this.rootId="",this.activePanelId=null,this.syncStore={rootId:"",elements:[]},this.panels=[{id:i(),name:tt,elements:[]}],this.setting={},this.cellList=[],this.draw=null,this.canvas=null,this.tmpCanvas=null,this.viewPort=null,this.renderer=null,this.selector=null,this.interaction=null,this.miniMap=null,this.grid=null,this.testUtils=null,this.textInput=null}}();function Lt(t){return 0===t}var Tt=function(t){return!Lt(t)};function Et(t,e){return t===e.length-1}var At=function(t){return 0===t.length};var Dt=function(t,e){return!function(t,e){return Lt(e)}(0,e)};var Mt=function(t,e,n){return!function(t,e,n){return Et(e,n)}(0,e,n)};function It(t,e){for(var n=0;n<t.length;n++){if(t[n]===e)return n}return null}function Rt(t){return t[0]}function kt(t){return t[t.length-1]}function Nt(t,e){var n=It(t,e);G(n)&&t.splice(n,1)}var zt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(t){function e(e){var n=t.call(this,e)||this;return n.interfaceStartDragList=[],n.interfaceBeforeDraggingList=[],n.interfaceDraggingList=[],n.interfaceAfterDraggingList=[],n.interfaceStopDragList=[],n.updateList=[],n.target=e.target,n}return zt(e,t),Object.defineProperty(e.prototype,"prevPoint",{get:function(){return this.getters.getInitialPoint(this.prevEvent)},enumerable:!0,configurable:!0}),e.prototype.getDeltaPointToPrevPoint=function(t){var e=t.x,n=t.y,r=this.prevPoint;return{x:e-r.x,y:n-r.y}},e.prototype.getDeltaXToPrevPoint=function(t){return this.getDeltaPointToPrevPoint(t).x},e.prototype.getDeltaYToPrevPoint=function(t){return this.getDeltaPointToPrevPoint(t).y},Object.defineProperty(e.prototype,"startPoint",{get:function(){return this.getters.getInitialPoint(this.startEvent)},enumerable:!0,configurable:!0}),e.prototype.getDeltaPointToStartPoint=function(t){var e=t.x,n=t.y,r=this.startPoint;return{x:e-r.x,y:n-r.y}},e.prototype.getDeltaXToStartPoint=function(t){return this.getDeltaPointToStartPoint(t).x},e.prototype.getDeltaYToStartPoint=function(t){return this.getDeltaPointToStartPoint(t).y},e.prototype.updatePrevEvent=function(t){this.prevEvent=t},e.prototype.updateStartEvent=function(t){this.startEvent=t},e.prototype.update=function(t){},e.prototype.start=function(t){this.getters.getInitialPoint(t);this.enable=!0,this.updatePrevEvent(t),this.updateStartEvent(t),this._applyInterfaceFn(this.interfaceStartDrag,this.interfaceStartDragList,t),this.handleStart&&this.handleStart(t,this)},e.prototype.dragging=function(t){this.handleBeforeDragging&&this.handleBeforeDragging(t,this),this._applyInterfaceFn(this.interfaceBeforeDragging,this.interfaceBeforeDraggingList,t);this.getters.getInitialPoint(t);this._applyInterfaceFn(this.update,this.updateList,t),this._applyInterfaceFn(this.interfaceDragging,this.interfaceDraggingList,t),this.handleDragging&&this.handleDragging(t,this),this.updatePrevEvent(t),this.handleAfterDragging&&this.handleAfterDragging(t,this),this._applyInterfaceFn(this.interfaceAfterDragging,this.interfaceAfterDraggingList,t)},e.prototype.stop=function(t){this.enable=!1,this._applyInterfaceFn(this.interfaceStopDrag,this.interfaceStopDragList,t),this.handleStop&&this.handleStop(t,this)},e.prototype.handleStart=function(t,e){},e.prototype.handleBeforeDragging=function(t,e){},e.prototype.handleDragging=function(t,e){},e.prototype.handleAfterDragging=function(t,e){},e.prototype.handleStop=function(t,e){},e.prototype._applyInterfaceFn=function(t,e,n){var r=this,o=At(e);o&&t&&t(n,this),!o&&e.map(function(t){return t(n,r)})},e}(h),Ut=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ht=Math.abs,Ft=function(t){function e(e){var n=t.call(this,e)||this;n._isInstance=!0,n.angle=0,n.prevAngle=0,n.show=!0,n.fillColor="#000",n.strokeColor="#000",n.strokeWidth=1,n.isPart=!1,n.kX=1,n.kY=1,n.prevKX=1,n.prevKY=1,n.shouldSelect=!1,n.draggable=!0,n.shouldRotate=!1,n.isSizing=!1,n.isVisiableInMiniMap=!0,n.fill="black",n.shouldRenderInMiniMap=!0,n.renderFnInMiniMap=null,n.addedToBottom=!1;var r=n.getters.miniMap;return n.id=G(e.id)?e.id:n.id,n.fillColor=G(e.fillColor)?e.fillColor:n.fillColor,n.strokeColor=G(e.strokeColor)?e.strokeColor:n.strokeColor,n.strokeWidth=G(e.strokeWidth)?e.strokeWidth:n.strokeWidth,n.show=G(e.show)?e.show:n.show,n.draggable=G(e.draggable)?e.draggable:n.draggable,n.isPart=G(e.isPart)?e.isPart:n.isPart,n.addedToBottom=G(e.addedToBottom)?e.addedToBottom:n.addedToBottom,n.dragger=new Bt({draw:n.draw,target:n}),n.dragger.update=n.updateDrag.bind(n),n.dragger.handleStart=n.handleStartDrag.bind(n),n.dragger.handleBeforeDragging=n.handleBeforeDragging.bind(n),n.dragger.handleDragging=n.handleDragging.bind(n),n.dragger.handleAfterDragging=n.handleAfterDragging.bind(n),n.dragger.handleStop=n.handleStopDrag.bind(n),n.actions.ADD_ELEMENT_TO_CELL_LIST(n),r&&r.preventDefaultCellsRenderInMiniMap&&(n.shouldRenderInMiniMap=!1),n.shouldRenderInMiniMap=G(e.shouldRenderInMiniMap)?e.shouldRenderInMiniMap:n.shouldRenderInMiniMap,n}return Ut(e,t),Object.defineProperty(e.prototype,"radian",{get:function(){return this.angle*et},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaAngle",{get:function(){return this.angle-this.prevAngle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaRadian",{get:function(){return this.deltaAngle*et},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitKX",{get:function(){var t=this.kX;return 0===t?0:t/Ht(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitKY",{get:function(){var t=this.kY;return 0===t?0:t/Ht(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return{left:0,right:0,top:0,bottom:0}},enumerable:!0,configurable:!0}),e.prototype.render=function(){},e.prototype.updateDrag=function(t,e){},e.prototype.handleStartDrag=function(t,e){},e.prototype.handleBeforeDragging=function(t,e){},e.prototype.handleDragging=function(t,e){},e.prototype.handleAfterDragging=function(t,e){},e.prototype.handleStopDrag=function(t){},e.prototype.handleClick=function(t){},e.prototype.handleDoubleClick=function(t){},e.prototype.handleMouseIn=function(t){},e.prototype.handleMouseMove=function(t){},e.prototype.handleMouseOut=function(t){},e.prototype.rotate=function(t){this.prevAngle=this.angle,this.angle=t},e.prototype.size=function(t,e,n){this.prevKX=this.kX,this.kX=t,this.prevKY=this.kY,this.kY=e},e.prototype.select=function(){this.shouldSelect=!0},e.prototype.deselect=function(){this.shouldSelect=!1},e}(h),Yt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wt=function(t){function e(e){return t.call(this,e)||this}return Yt(e,t),e.prototype.render=function(){t.prototype.render.call(this)},e}(Ft),Kt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vt=function(t){function e(e){var n=t.call(this,e)||this;return n.scalable=!0,n}return Kt(e,t),e.prototype.render=function(){this.getters.ctx;t.prototype.render.call(this)},e}(Wt),Xt=function(t,e){return void 0===e&&(e=new Path2D),t.map(function(t,n,r){var o=r.length;0===n&&e.moveTo(t.x,t.y);0!==n&&e.lineTo(t.x,t.y);if(n===o-1){var i=r[0];e.lineTo(i.x,i.y)}}),e},Gt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=(Math.max,Math.min,Math.PI,function(t){function e(e){var n=t.call(this,e)||this;return n.target=e.target,n}return Gt(e,t),Object.defineProperty(e.prototype,"targetSizable",{get:function(){return this.target&&this.target.sizable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radian",{get:function(){return this.target.radian},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.target.itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.container,e=t.leftTop,n=t.rightTop,r=t.rightBottom,o=t.leftBottom;new Path2D;return Xt([e,n,r,o])},enumerable:!0,configurable:!0}),e.prototype.render=function(){if(this.targetSizable){var t=this.getters.ctx;t.save(),t.lineWidth=1,t.strokeStyle="#5FB3B3",t.stroke(this.path2d),t.restore()}},e}(h)),Qt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jt=function(t){function e(e){var n=t.call(this,e)||this;return n.type=vt,n.x=0,n.y=0,n.rotatable=!1,n.x=e.x,n.y=e.y,n}return Qt(e,t),Object.defineProperty(e.prototype,"R",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SizeContainer",{get:function(){var t=this.x,e=this.y,n=this.R/2;return new Zt({points:[{x:t-n,y:e-n},{x:t+n,y:e-n},{x:t+n,y:e+n},{x:t-n,y:e+n}],target:this,draw:this.draw})},enumerable:!0,configurable:!0}),e.prototype.translate=function(t,e){var n=function(t,e,n){return{x:t.x+e,y:t.y+n}}({x:this.x,y:this.y},t,e);this.x=n.x,this.y=n.y},e.prototype.render=function(){var e=this.getters.ctx;t.prototype.render.call(this),e.save(),e.fillStyle=this.fill,e.restore()},e.prototype.contain=function(t,e){},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e);this.translate(n,r)}},e}(Vt),$t=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qt=function(t){function e(e){return t.call(this,e)||this}return $t(e,t),e}(Jt),te=function(t,e,n){void 0===n&&(n={x:0,y:0});var r=t.x,o=t.y,i=n.x,a=n.y,s={x:r-i,y:o-a},u=s.x,c=s.y;return{x:u*Math.cos(e)-c*Math.sin(e)+i,y:u*Math.sin(e)+c*Math.cos(e)+a}},ee=n(84),ne=n.n(ee),re=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(t){function e(e){var n=t.call(this,e)||this;n.type=wt,n.image=new Image;var r=n;return n.target=e.target,n.image.src=ne.a,n.image.onload=function(){r.shouldRender&&r.render()},n}return re(e,t),Object.defineProperty(e.prototype,"targetRotatable",{get:function(){return this.target.sizable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radian",{get:function(){return this.target.radian},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCenter",{get:function(){return this.target.itemCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicArrowCenter",{get:function(){var t=e.SPACE;return{x:this.itemCenter.x,y:this.target.itemInitialBounds.top-t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotatedArrowCenter",{get:function(){var t=this.itemCenter;return te(this.basicArrowCenter,this.radian,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldRender",{get:function(){var t=this.target,e=t.shouldSelect,n=t.shouldRotate;return e||n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){var t=e.SIZE,n=this.itemCenter,r=function(t,e,n){return void 0===n&&(n={x:0,y:0}),t.map(function(t){return te(t,e,n)})}(function(t,e,n){var r=t.x,o=t.y,i=e/2,a=n/2,s=r-i,u=r+i,c=o-a,p=o+a;return[{x:s,y:c},{x:u,y:c},{x:u,y:p},{x:s,y:p}]}(this.basicArrowCenter,t,t),this.radian,n);return Xt(r)},enumerable:!0,configurable:!0}),e.prototype.render=function(){if(this.targetRotatable&&this.shouldRender){var t=this.getters.ctx,n=e.SIZE;t.save(),t.transform(1,0,0,1,this.rotatedArrowCenter.x,this.rotatedArrowCenter.y),t.drawImage(this.image,-n/2,-n/2,n,n),t.restore(),this.getters.renderer.setTransformViewPort()}},e.prototype.contain=function(t,e){return this.targetRotatable&&this.getters.pointOnPath({x:t,y:e},this.path)},e.prototype.handleStartDrag=function(t){this.sharedActions.deselectCell(this.target),this.sharedActions.enableCellRotate(this.target)},e.prototype.updateDrag=function(t){var e=this;if(this.draggable){var n=function(t){var n=t.x,r=t.y,o=e.dragger.prevPoint,i=o.x,s=o.y,u=e.itemCenter,c=u.x,p=u.y,l=a({x:n-c,y:r-p}),f=a({x:i-c,y:s-p});return l-f}(this.getters.getInitialPoint(t)),r=this.radian+n;this.sharedActions.rotateCell(this.target,r*nt)}},e.prototype.handleStopDrag=function(t){this.target.shouldRotate;this.sharedActions.disableCellRotate(this.target),this.sharedActions.selectCell(this.target)},e.SPACE=20,e.SIZE=20,e}(Ft),ie=function(){function t(){}return t.getNewK=function(t,e,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);var u=c(n,-i),p=u.x,l=u.y,h=c(r,-i),g=h.x,d=h.y,y=c(o,-i),v=y.x,b=y.y,m=t,P=e;!a&&f(t)&&function(t,e){return t!==e}(p,v)&&(m=(m=(g-v)/((p-v)/t))>1e-12||m<0?m:1e-12);!s&&f(e)&&function(t,e){return t!==e}(l,b)&&(P=(P=(d-b)/((l-b)/e))>1e-12||P<0?P:1e-12);return{kX:m,kY:P}},t}(),ae=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=Math.PI,ue=function(t){function e(e){var n=t.call(this,e)||this;return n.type=xt,n.sizePoints=e.sizePoints,n}return ae(e,t),Object.defineProperty(e.prototype,"sizable",{get:function(){return this.target&&this.target.sizable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=new Path2D;return t.arc(this.x,this.y,5,0,2*se),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.target.itemCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.point.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.point.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return G(this.sizePoints)?this.sizePoints.target:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetUnitKX",{get:function(){return this.target.unitKX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetUnitKY",{get:function(){return this.target.unitKY},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx;t.save(),t.fillStyle="#3b99fc",t.fill(this.path2d),t.restore()},e.prototype.contain=function(t,e){return this.sizable&&this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e),o=this.target,i=o.kX,a=o.kY,s=this.point,u={x:s.x+n,y:s.y+r},c=this.getNewK(i,a,this.point,u,this.center,this.target.angle),p=c.kX,l=c.kY;this.target&&this.sharedActions.sizeItem(this.target,p,l,this.center)}},e.prototype.getNewK=function(t,e,n,r,o,i){},e}(Ft),ce=function(t){function e(e){return t.call(this,e)||this}return ae(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.leftTopPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.rightBottomPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ie.getNewK(t,e,this.point,r,this.center,this.target.angle)},e}(ue),pe=function(t){function e(e){return t.call(this,e)||this}return ae(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.topPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.bottomPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ie.getNewK(t,e,this.point,r,this.center,this.target.angle,!0,!1)},e}(ue),le=function(t){function e(e){return t.call(this,e)||this}return ae(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.rightTopPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.leftBottomPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ie.getNewK(t,e,this.point,r,this.center,this.target.angle)},e}(ue),fe=function(t){function e(e){return t.call(this,e)||this}return ae(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.leftPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.rightPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ie.getNewK(t,e,this.point,r,this.center,this.target.angle,!1,!0)},e}(ue),he=function(t){function e(e){return t.call(this,e)||this}return ae(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.rightPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.leftPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ie.getNewK(t,e,this.point,r,this.center,this.target.angle,!1,!0)},e}(ue),ge=function(t){function e(e){return t.call(this,e)||this}return ae(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.leftBottomPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.rightTopPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ie.getNewK(t,e,this.point,r,this.center,this.target.angle)},e}(ue),de=function(t){function e(e){return t.call(this,e)||this}return ae(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.bottomPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.topPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ie.getNewK(t,e,this.point,r,this.center,this.target.angle,!0,!1)},e}(ue),ye=function(t){function e(e){return t.call(this,e)||this}return ae(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.rightBottomPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.leftTopPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ie.getNewK(t,e,this.point,r,this.center,this.target.angle)},e}(ue),ve=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(t){function e(e){var n=t.call(this,e)||this;return n.sizeContainer=e.sizeContainer,n.leftTop=new ce({draw:n.draw,sizePoints:n}),n.top=new pe({draw:n.draw,sizePoints:n}),n.rightTop=new le({draw:n.draw,sizePoints:n}),n.left=new fe({draw:n.draw,sizePoints:n}),n.right=new he({draw:n.draw,sizePoints:n}),n.leftBottom=new ge({draw:n.draw,sizePoints:n}),n.bottom=new de({draw:n.draw,sizePoints:n}),n.rightBottom=new ye({draw:n.draw,sizePoints:n}),n}return ve(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return G(this.sizeContainer)?this.sizeContainer.target:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetSizable",{get:function(){return this.target.sizable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.sizeContainer.container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftTopPoint",{get:function(){return this.container.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightTopPoint",{get:function(){return this.container.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBottomPoint",{get:function(){return this.container.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftBottomPoint",{get:function(){return this.container.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topPoint",{get:function(){var t=this.leftTopPoint,e=t.x,n=t.y,r=this.rightTopPoint;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftPoint",{get:function(){var t=this.leftTopPoint,e=t.x,n=t.y,r=this.leftBottomPoint;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightPoint",{get:function(){var t=this.rightTopPoint,e=t.x,n=t.y,r=this.rightBottomPoint;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomPoint",{get:function(){var t=this.leftBottomPoint,e=t.x,n=t.y,r=this.rightBottomPoint;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizePoints",{get:function(){return[this.leftTop,this.top,this.rightTop,this.left,this.right,this.leftBottom,this.bottom,this.rightBottom]},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.targetSizable&&this.sizePoints.map(this.sharedActions.renderParticle)},e}(h),me=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pe=Math.abs,_e=function(t){function e(e){var n=t.call(this,e)||this;return n.sizable=G(e.sizable)?e.sizable:n.sizable,n.sizable&&(n.sizeContainer=new Zt({draw:n.draw,target:n})),n.rotatable=G(e.rotatable)?e.rotatable:n.rotatable,n.rotatable&&(n.rotationArrow=new oe({draw:n.draw,target:n})),n}return me(e,t),e.prototype.implementInUpperConstructor=function(){this.sizePoints=new be({draw:this.draw,sizeContainer:this.sizeContainer})},Object.defineProperty(e.prototype,"bounds",{get:function(){return this.itemInitialBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsExtra",{get:function(){var t=this.bounds,e=t.left,n=t.top,r=t.right,o=t.bottom;return{left:e,top:n,right:r,bottom:o,leftCenter:{x:e,y:(o+n)/2},topCenter:{x:(e+r)/2,y:n},rightCenter:{x:r,y:(o+n)/2},bottomCenter:{x:(e+r)/2,y:o},width:Pe(r-e),height:Pe(o-n)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCenter",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemInitialBounds",{get:function(){return{left:0,right:0,top:0,bottom:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemContainer",{get:function(){var t=this.itemInitialBounds,e=t.left,n=t.right,r=t.top,o=t.bottom,i=this.radian,a=this.itemCenter,s={x:n,y:r},u={x:n,y:o},c={x:e,y:o},p=te({x:e,y:r},i,a),l=te(s,i,a),f=te(u,i,a),h=te(c,i,a),g=this.unitKX,d=this.unitKY,y={x:p.x,y:p.y},v={x:l.x,y:l.y},b={x:f.x,y:f.y},m={x:h.x,y:h.y};return g<0&&d<0&&(y={x:f.x,y:f.y},v={x:h.x,y:h.y},b={x:p.x,y:p.y},m={x:l.x,y:l.y}),g>0&&d<0&&(y={x:h.x,y:h.y},v={x:f.x,y:f.y},b={x:l.x,y:l.y},m={x:p.x,y:p.y}),g<0&&d>0&&(y={x:l.x,y:l.y},v={x:p.x,y:p.y},b={x:h.x,y:h.y},m={x:f.x,y:f.y}),{leftTop:y,rightTop:v,rightBottom:b,leftBottom:m}},enumerable:!0,configurable:!0}),e.prototype.size=function(t,e,n){},e.prototype.renderTransformWidget=function(){this.shouldSelect&&this.sizeContainer&&this.sizePoints&&(this.sizeContainer.render(),this.sizePoints.render()),this.rotationArrow&&this.rotationArrow.shouldRender&&this.sizeContainer&&this.rotationArrow&&(this.sizeContainer.render(),this.rotationArrow.render())},e}(Ft),we=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xe=function(t){function e(e){return t.call(this,e)||this}return we(e,t),e}(_e),Oe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Se=(Math.max,Math.min,Math.PI),je=function(t){function e(e){var n=t.call(this,e)||this;return n.target=e.target,n}return Oe(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.target.bounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.target.angle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radian",{get:function(){return this.angle*Se/180},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.bounds,e=t.left,n=t.right,r=t.top,o=t.bottom,i=(this.radian,{x:e,y:r}),a={x:n,y:r},s={x:n,y:o},u={x:e,y:o};new Path2D;return Xt([i,a,s,u])},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx;t.save(),t.stroke(this.path2d),t.restore()},e}(h),Ce={x:0,y:0};function Le(t,e){t.strokeStyle="yellow",t.lineWidth=1,t.stroke(e)}var Te=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=(Math.min,Math.max,function(t){function e(e){var n=t.call(this,e)||this;n.segments=[],n.curves=[],n.fillColor="#61dafb",n.strokeColor=null,n.strokeWidth=1,n.showHandle=!1,n.defaultSegmentHandleLength=rt;var r=n.segments||[];if(f(e.segments)&&(r=e.segments),n.curveUsesCanvasApi=G(e.curveUsesCanvasApi)?e.curveUsesCanvasApi:n.curveUsesCanvasApi,n.curveRate=G(e.curveRate)?e.curveRate:n.curveRate,n.fillColor=Z(e.fillColor)?e.fillColor:n.fillColor,n.strokeColor=Z(e.strokeColor)?e.strokeColor:n.strokeColor,n.strokeWidth=Z(e.strokeWidth)?e.strokeWidth:n.strokeWidth,n.showHandle=G(e.showHandle)?e.showHandle:n.showHandle,n.defaultSegmentHandleLength=G(e.defaultSegmentHandleLength)?e.defaultSegmentHandleLength:n.defaultSegmentHandleLength,l()(e.segments)&&(r=f(e.points)?e.points.map(function(t){return n.sharedGetters.createSegmentByPoint(t,n.draw,{path:n,defaultHandleLength:n.defaultSegmentHandleLength,showHandle:n.showHandle})}):n.segments),n.updateSegments(r),n.boundsContainer=new je({draw:n.draw,target:n}),f(e.angle)&&n.rotate(e.angle),n.implementInUpperConstructor(),f(e.kX)||f(e.kY)){f(e.kX)?e.kX:n.kX,f(e.kY)?e.kY:n.kY;n.size(e.kX,e.kY,n.itemCenter)}return n.showHandle||n.sharedActions.hideSegmentsHandles(n.segments),n}return Te(e,t),e.prototype.implementInUpperConstructor=function(){t.prototype.implementInUpperConstructor&&t.prototype.implementInUpperConstructor.call(this)},Object.defineProperty(e.prototype,"segmentsCenter",{get:function(){return this.sharedGetters.getSegmentsCenter(this.segments)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this.segmentsCenter.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this.segmentsCenter.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){return this.sharedGetters.getPath2dByCurves(this.curves)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.sharedGetters.getPathBounds(this.curves)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialBounds",{get:function(){return this.sharedGetters.getPathInitialBounds(this.curves)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCenter",{get:function(){return this.sharedGetters.getPathItemCenter(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemInitialBounds",{get:function(){var t=this.itemCenter,e=(t.x,t.y,te(t,-this.radian,Ce)),n=t.x-e.x,r=t.y-e.y;return this.sharedGetters.getTranslatedBounds(this.initialBounds,n,r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this.segments.map(function(t){return t.point})},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx,e=this.fillColor,n=this.strokeColor,r=this.strokeWidth;t.save(),G(e)&&(t.fillStyle=Z(e)?e:"#61dafb",t.fill(this.path2d)),t.restore(),this.segments.map(this.sharedActions.renderParticle),this.renderTransformWidget(),G(n)&&(t.strokeStyle=n,t.lineWidth=r,t.stroke(this.path2d)),this.shouldSelect&&(t.strokeStyle="yellow",t.lineWidth=1,t.stroke(this.path2d)),this.shouldSelect&&Le(t,this.path2d)},e.prototype.contain=function(t,e){return this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.updateDrag=function(t,e){if(this.draggable){var n=this.getters.getInitialPoint(t),r=e.getDeltaXToPrevPoint(n),o=e.getDeltaYToPrevPoint(n);this.sharedActions.translateSegments(this.segments,r,o)}},e.prototype.rotate=function(t){var e=t-this.angle;this.sharedActions.rotateSegments(this.segments,e,this.itemCenter),this.prevAngle=this.angle,this.angle=t},e.prototype.size=function(t,e,n){this.kX,this.kY;var r=0===this.kX?0:t/this.kX,o=0===this.kY?0:e/this.kY;this.sharedActions.sizeSegments(this.segments,r,o,n),this.prevKX=this.kX,this.kX=t,this.prevKY=this.kY,this.kY=e},e.prototype.updateSegments=function(t){var e=this;this.segments=t,this.sharedActions.ajustSegmentsPreviousAndNext(this.segments),this.segments.map(function(t){var n=e.sharedGetters.getPerpHandleRelativePoint(t.previous,t,t.next);e.sharedActions.updateHandleRelativePoint(t.handleOut,n),e.sharedActions.adjustHandleParterPoint(t.handleOut)}),this.actions.REMOVE_ELEMENTS(this.curves),this.curves=this.sharedGetters.getCurves(this.segments,this.curveUsesCanvasApi,this.curveRate,this.draw)},e.prototype.translate=function(t,e){this.sharedActions.translateSegments(this.segments,t,e)},e.prototype.translateTo=function(t,e){var n=this.itemCenter,r=t-n.x,o=e-n.y;this.translateTo(r,o)},e.prototype.translateToPoint=function(t){this.translateTo(t.x,t.y)},e}(xe)),Ae=function(t){var e=t.left,n=t.top,r=t.right,o=t.bottom,i=t.width,a=t.height;return{leftTop:{x:e,y:n},rightTop:{x:r=f(r)?r:e+i,y:n},rightBottom:{x:r,y:o=f(o)?o:n+a},leftBottom:{x:e,y:o},topCenter:{x:(e+r)/2,y:n},rightCenter:{x:r,y:(n+o)/2},bottomCenter:{x:(e+r)/2,y:o},leftCenter:{x:e,y:(n+o)/2}}},De=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Me=function(t){function e(n){var r=t.call(this,function(t){var n=t.x,r=t.y,o=t.left,i=t.top,a=t.width,s=t.height;a=Z(a)?a:e.DEFAULT_WIDTH,s=Z(s)?s:e.DEFAULT_HEIGHT,G(n)&&G(r)?(o=n-a/2,i=r-s/2):(o=Z(o)?o:e.DEFAULT_LEFT,i=Z(i)?i:e.DEFAULT_TOP);var u=Ae({left:o,top:i,width:a,height:s}),c=u.leftTop,p=u.rightTop,l=u.rightBottom,f=u.leftBottom,h=[c,p,l,f];return t.points=h,t}(n))||this;r.type=gt,r.left=e.DEFAULT_LEFT,r.top=e.DEFAULT_TOP,r.width=e.DEFAULT_WIDTH,r.height=e.DEFAULT_HEIGHT,r.t=1;var o=n.x,i=n.y,a=n.left,s=n.top;r.width=G(n.width)?n.width:r.width,r.height=G(n.height)?n.height:r.height;var u=r,c=u.width,p=u.height;return G(o)&&G(i)?(r.left=o-c/2,r.top=i-p/2):(r.left=G(a)?a:r.left,r.top=G(s)?s:r.top),r.sizable=G(n.sizable)?n.sizable:r.sizable,r.rotatable=G(n.rotatable)?n.rotatable:r.rotatable,r.sharedActions.clearSegmentsHandles(r.segments),r.sharedActions.hideSegmentsHandles(r.segments),r.sharedActions.hideSegments(r.segments),r}return De(e,t),e.prototype.updateWidth=function(t){this.width=t},e.prototype.updateHeight=function(t){this.height=t},e.prototype.translate=function(e,n){this.left=this.left+e,this.top=this.top+n,t.prototype.translate.call(this,e,n)},e.DEFAULT_LEFT=0,e.DEFAULT_TOP=0,e.DEFAULT_WIDTH=100,e.DEFAULT_HEIGHT=100,e}(Ee),Ie=Math.sqrt,Re=Math.pow,ke=Math.atan,Ne=Math.abs,ze=Math.PI,Be=function(){function t(t,e){function n(t){var e=!1;try{e=B()(t.x)&&B()(t.y)}catch(t){}return e}this.type="MATH_VECTOR",B()(t)&&B()(e)&&(this.x=t,this.y=e),n(t)&&!n(e)&&(this.x=t.x,this.y=t.y),n(t)&&n(e)&&(this.x=e.x-t.x,this.y=e.y-t.y)}return Object.defineProperty(t.prototype,"length",{get:function(){return Ie(Re(this.x,2)+Re(this.y,2))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unit",{get:function(){return this.divide(this.length)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){var t,e=this.x,n=this.y,r=180*ke(Ne(n/e))/ze;return(function(t){return 0===t.x&&0===t.y}(this)||function(t){return 0===t.y&&t.x>0}(this))&&(t=0),function(t){return 0===t.y&&t.x<0}(this)&&(t=180),function(t){return 0===t.x&&t.y>0}(this)&&(t=90),function(t){return 0===t.x&&t.y<0}(this)&&(t=270),function(t){return t.x>0&&t.y>0}(this)&&(t=r),function(t){return t.x<0&&t.y>0}(this)&&(t=180-r),function(t){return t.x<0&&t.y<0}(this)&&(t=180+r),function(t){return t.x>0&&t.y<0}(this)&&(t=360-r),t},enumerable:!0,configurable:!0}),t.prototype.add=function(e){var n=e.x,r=e.y;return new t(this.x+n,this.y+r)},t.prototype.subtract=function(e){var n=e.x,r=e.y;return new t(this.x-n,this.y-r)},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e)},t.prototype.divide=function(e){return new t(this.x/e,this.y/e)},t.prototype.rotate=function(e){var n=e*Math.PI/180,r=this.x,o=this.y;return new t(r*Math.cos(n)-o*Math.sin(n),r*Math.sin(n)+o*Math.cos(n))},t.prototype.absoluteParallelWith=function(t){return this.angle===t.angle},t}(),Ue=function(t,e,n){var r,o,i,a,s,p=u(t),l=u(e);o=new Be(p,l).angle,r=c(l,-o,p);var f=p.x,h=p.y,g=r.x,d=r.y;return i={x:g+n,y:d-n},a={x:g+n,y:d+n},s={x:f-n,y:h+n},{leftTop:c({x:f-n,y:h-n},o,p),rightTop:c(i,o,p),rightBottom:c(a,o,p),leftBottom:c(s,o,p)}},He=function(t,e,n){void 0===n&&(n=20);var r,o,i,a,s,p,l=u(t),f=u(e);o=new Be(l,f).angle;var h=(r=c(f,-o,l)).x,g=r.y;return i={x:h-4*n/5,y:g},a={x:h-n,y:g+n/2},s=c({x:h-n,y:g-n/2},o,l),p=c(i,o,l),{top:s,right:f,bottom:c(a,o,l),left:p}},Fe="#999",Ye=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),We=function(t){function e(e){var n=t.call(this,function(t){var e=t.source,n=t.target,r=t.sourceSegment,o=t.targetSegment;if(f(e)&&f(n)){var i=[e,n];t.points=i}if(f(r)&&f(o)){var a=[r,o];t.segments=a}return t}(e))||this;n.type=dt,n.rotatable=!1,n.sizable=!1,n.t=1,n.fillColor=Fe,n.lineWidth=1,n.showArrow=!1;var r=e.lineWidth,o=e.getErasingPath2d;n.lineWidth=G(r)?r:n.lineWidth,n.getErasingPath2d=G(o)?o:n.getErasingPath2d;var i=n.segments.length;return n.source=n.segments[0],n.target=n.segments[i-1],n.showArrow=f(e.showArrow)?e.showArrow:n.showArrow,n.sharedActions.clearSegmentsHandles(n.segments),n.sharedActions.hideSegmentsHandles(n.segments),n.fillColor=f(e.fillColor)?e.fillColor:n.fillColor,n}return Ye(e,t),Object.defineProperty(e.prototype,"hitBounds",{get:function(){return Ue(this.source.point,this.target.point,this.lineWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRegionPath2d",{get:function(){var t=this.hitBounds,e=t.leftTop,n=t.rightTop,r=t.rightBottom,o=t.leftBottom;return Xt([e,n,r,o])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetArrowPath2d",{get:function(){var t=He(this.source.point,this.target.point,20),e=t.top,n=t.right,r=t.bottom,o=t.left;return Xt([e,n,r,o])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){var t=this.source,e=this.target;return t.x===e.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHorizontal",{get:function(){var t=this.source,e=this.target;return t.y===e.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCoincided",{get:function(){var t=this.source,e=this.target,n=t.x,r=t.y,o=e.x,i=e.y;return n===o&&r===i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){var t=this.source,e=t.x,n=t.y,r=this.target;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"erasingPath2d",{get:function(){var t=this.getErasingPath2d;return t?t():null},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.renderHitRegion(),this.showArrow&&this.renderArrow()},e.prototype.renderHitRegion=function(){var t=this.erasingPath2d,e=this.getters.ctx,n=this.getters,r=(n.tmpCtx,n.tmpCanvas,this.bounds),o=(r.left,r.right,r.top);r.bottom;e.save(),e.fillStyle=this.fillColor,e.fill(this.hitRegionPath2d),this.shouldSelect&&Le(e,this.hitRegionPath2d),e.globalCompositeOperation="destination-out",t&&e.fill(t),e.restore()},e.prototype.renderArrow=function(){if(this.showArrow){var t=this.getters.ctx;t.save(),t.fillStyle=this.fillColor,t.fill(this.targetArrowPath2d),this.shouldSelect&&Le(t,this.targetArrowPath2d),t.restore()}},e.prototype.contain=function(t,e){var n=this.getters.pointOnPath({x:t,y:e},this.hitRegionPath2d),r=this.getters.pointOnPath({x:t,y:e},this.targetArrowPath2d);return this.showArrow&&r||n},e.prototype.updateSegments=function(e){t.prototype.updateSegments.call(this,e);var n=e.length;this.source=e[0],this.target=e[n-1]},e.prototype.translate=function(t,e){this.source.translate(t,e),this.target.translate(t,e)},e.prototype.translateTargetToPoint=function(t){G(this.target)&&this.target.translateToPoint(t)},e.prototype.forceRemove=function(){this.remove(),this.actions.REMOVE_ELEMENTS([this.source,this.target])},e}(Ee),Ke=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=function(t){function e(e){var n=t.call(this,e)||this;return n.type=ht,n.shouldRenderInMiniMap=!0,n}return Ke(e,t),e}(Ee),Xe=Math.sqrt,Ge=Math.pow,Ze=function(t,e){var n=t.x,r=t.y,o=e.x,i=e.y;return Xe(Ge(o-n,2)+Ge(i-r,2))},Qe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Je=Math.cos,$e=Math.sin,qe=Math.PI,tn=function(t){function e(e){var n=t.call(this,e)||this;n.type=J.HANDLE_IN,n.show=!0,n.partner=null,n.defaultLength=rt;var r=n;return n.segment=e.segment,f(e.type)&&(n.type=e.type),f(e.partner)&&(n.partner=e.partner),n.defaultLength=G(e.defaultLength)?e.defaultLength:n.defaultLength,n.show=G(e.show)?e.show:n.show,n.relativePoint=function(t,e){var n=0;e===J.HANDLE_IN&&(n=-180);e===J.HANDLE_OUT&&(n=0);t.x,t.y;var o=r.defaultLength,i=o*Je(n*et),a=o*$e(n*et);return{x:i,y:a}}(n.segmentPoint,n.type),n.dragger=new Bt({draw:n.draw}),n.dragger.update=n.updateDrag.bind(n),n}return Qe(e,t),Object.defineProperty(e.prototype,"segmentPoint",{get:function(){return this.segment.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linePath",{get:function(){var t=new Path2D,e=this.segmentPoint,n=e.x,r=e.y,o=this.point,i=o.x,a=o.y;return t.moveTo(n,r),t.lineTo(i,a),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointPath",{get:function(){var t=new Path2D,e=this.point,n=e.x,r=e.y;return t.arc(n,r,3,0,2*qe),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){var t=this.segmentPoint,e=this.relativePoint;return{x:t.x+e.x,y:t.y+e.y}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.point.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.point.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){var t=this.point,e=this.segment;return Ze(t,e)},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.show&&(this.renderLine(),this.renderPoint())},e.prototype.renderLine=function(){var t=this.getters.ctx,e=this.linePath;t.save(),t.strokeStyle="deepSkyBlue",t.stroke(e),t.restore()},e.prototype.renderPoint=function(){var t=this.getters.ctx,e=this.pointPath;t.save(),t.fillStyle=this.type===J.HANDLE_IN?"#fc929e":"#79b6f2",t.fill(e),t.restore()},e.prototype.contain=function(t,e){return this.show&&this.getters.pointOnPath({x:t,y:e},this.pointPath)},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e),o=this.relativePoint,i={x:o.x+n,y:o.y+r};this.sharedActions.updateHandleRelativePoint(this,i),this.sharedActions.adjustHandleParterPoint(this)}},e}(Ft),en=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nn=Math.PI,rn=function(t){function e(e){var n=t.call(this,e)||this;n.show=!0,n.selected=!1,n.shouldShowHandleIn=!1,n.shouldShowHandleOut=!1,n.fillColor="deepSkyBlue",n.defaultHandleLength=rt,n.showHandle=!1,n.x=e.x,n.y=e.y,n.path=G(e.path)?e.path:n.path,n.show=G(e.show)?e.show:n.show;var r=n.drawStore.setting.showSegments;return n.show=G(r)?r:n.show,n.fillColor=G(e.fillColor)?e.fillColor:n.fillColor,n.defaultHandleLength=G(e.defaultHandleLength)?e.defaultHandleLength:n.defaultHandleLength,n.showHandle=G(e.showHandle)?e.showHandle:n.showHandle,n.handleIn=new tn({draw:n.draw,segment:n,type:J.HANDLE_IN,defaultLength:n.defaultHandleLength,show:n.showHandle}),n.handleOut=new tn({draw:n.draw,segment:n,type:J.HANDLE_OUT,defaultLength:n.defaultHandleLength,show:n.showHandle}),n.handleIn.partner=n.handleOut,n.handleOut.partner=n.handleIn,n.sharedActions.adjustHandleParterPoint(n.handleIn),n}return en(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return{x:this.x,y:this.y}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=new Path2D;return t.arc(this.x,this.y,5,0,2*nn),t},enumerable:!0,configurable:!0}),e.prototype.render=function(){if(this.show){var t=this.getters.ctx;t.save(),t.lineWidth=3,t.fillStyle=this.fillColor,t.fill(this.path2d),t.restore(),this.handleIn.render(),this.handleOut.render()}},e.prototype.renerPosition=function(){var t="("+this.x+", "+this.y+")",e=this.getters.ctx;e.save(),e.font="12px",e.fillText(t,this.x,this.y),e.restore()},e.prototype.contain=function(t,e){return this.show&&this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.updateDrag=function(t,e){if(this.draggable){var n=this.getters.getInitialPoint(t),r=e.getDeltaXToPrevPoint(n),o=e.getDeltaYToPrevPoint(n);this.translate(r,o)}},e.prototype.translate=function(t,e){this.x=this.x+t,this.y=this.y+e},e.prototype.translateTo=function(t,e){this.x=t,this.y=e},e.prototype.translateToPoint=function(t){this.x=t.x,this.y=t.y},e}(Ft),on=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),an=function(t){function e(n){var r=t.call(this,n)||this;return r.type=mt,r.x=0,r.y=0,r.text="",r.fontSize=e.DEFAULT_FONT_SIZE,r.x=f(n.x)?n.x:r.x,r.y=f(n.y)?n.y:r.y,r.text=f(n.text)?n.text:r.text,r.fontSize=f(n.fontSize)?n.fontSize:r.fontSize,r}return on(e,t),Object.defineProperty(e.prototype,"width",{get:function(){var t=this.fontSize,e=this.getters.ctx;return e.textBaseline="bottom",e.textAlign="center",e.font=t+"px sans-serif",this.getters.ctx.measureText(this.text).width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this.fontSize,e=this.getters.ctx;return e.textBaseline="bottom",e.textAlign="center",e.font=t+"px Arial",e.measureText("yy").width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.x,e=this.y,n=this.width,r=this.height,o=Ae({left:t-n/2,top:e-r,width:n,height:r}),i=o.leftTop,a=o.rightTop,s=o.rightBottom,u=o.leftBottom;return Xt([i,a,s,u])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textInput",{get:function(){return this.getters.textInput},enumerable:!0,configurable:!0}),e.prototype.contain=function(t,e){return this.show&&this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.render=function(){if(this.show){var t=this.getters.ctx,e=this.text,n=this.x,r=this.y,o=this.fontSize;t.save(),t.textBaseline="bottom",t.textAlign="center",t.fillStyle=this.fillColor,t.font=o+"px sans-serif",t.fillText(e,n,r),t.restore()}},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e);this.translate(n,r)}},e.prototype.handleDoubleClick=function(t){var e=t.x,n=t.y;this.getters.textInput.target=this,this.getters.textInput.updateProp({left:e,top:n,text:this.text}),this.getters.textInput.show(),this.getters.textInput.focus()},e.prototype.translate=function(t,e){this.x=this.x+t,this.y=this.y+e},e.prototype.updateText=function(t){this.text=t},e.DEFAULT_FONT_SIZE=12,e}(Ft),sn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),un=function(t){function e(e){var n=t.call(this,e)||this;return n.type=yt,n}return sn(e,t),Object.defineProperty(e.prototype,"twoPointsLines",{get:function(){return this.sharedGetters.getTwoPointsLine(this.points)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRegionPath2d",{get:function(){var t=this.lineWidth,e=new Path2D;return this.twoPointsLines.map(function(n){var r=Ue(n.source,n.target,t),o=r.leftTop,i=r.rightTop,a=r.rightBottom,s=r.leftBottom;Xt([o,i,a,s],e)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetArrowPath2d",{get:function(){var t=this.segments.length,e=this.segments[t-2].point,n=this.target.point,r=He(e,n,20),o=r.top,i=r.right,a=r.bottom,s=r.left;return Xt([o,i,a,s])},enumerable:!0,configurable:!0}),e}(We);function cn(t){return function(e,n,r){return Lt(n)?t.createStartSegment(e):Et(n,r)?t.createEndSegment(e):t.createCornerSegment(e)}}function pn(t,e){var n=t.x,r=t.y,o=e.x,i=e.y;return n===o&&r!==i||r===i&&n!==o}var ln=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fn=function(t){function e(e){var n=t.call(this,e)||this;return n.centerSegment=null,n.renderFnInMiniMap=function(){var t=n.getters.ctx;t.lineWidth=5,t.fillStyle="#2aaffa",t.strokeStyle="#2aaffa",n.hitRegionPath2d&&t.fill(n.hitRegionPath2d),n.hitRegionPath2d&&t.stroke(n.hitRegionPath2d)},n.orthogonalLine=e.orthogonalLine,n}return ln(e,t),e.prototype.updateCenterSegmentPosition=function(){this.sharedActions.updateSegmentPoint(this.centerSegment,this.center)},e}(We),hn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},dn=function(t){function e(e){var n=t.call(this,e)||this;return n.orthogonalLine.isSimpleLine||(n.centerSegment=n.orthogonalLine.createStartCenterSegment(gn({},n.center,{line:n}))),n}return hn(e,t),e}(fn),yn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bn=function(t){function e(e){var n=t.call(this,e)||this;return n.orthogonalLine.isSimpleLine||(n.centerSegment=n.orthogonalLine.createEndCenterSegment(vn({},n.center,{line:n}))),n}return yn(e,t),e}(fn),mn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},_n=function(t){function e(e){var n=t.call(this,e)||this;return n.centerSegment=n.orthogonalLine.createEndInnerCenterSegment(Pn({},n.center,{line:n})),n}return mn(e,t),e}(fn),wn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xn=function(t){function e(e){var n=t.call(this,e)||this;return n.orthogonalLine=e.orthogonalLine,n}return wn(e,t),e}(rn);var On=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sn=function(t){function e(e){var n=t.call(this,function(t,e){return t.fillColor=e,t}(e,"deepSkyBlue"))||this;return n.line=null,n.orthogonalLine=e.orthogonalLine,n.line=e.line,n}return On(e,t),e.prototype._updateLineColorToDefault=function(){this.line.fillColor=Fe},e.prototype.handleDragging=function(t){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e),o=this.line,i=o.isVertical,a=o.isHorizontal;i&&this.line.translate(n,0),a&&this.line.translate(0,r),this._updateLineColorToDefault(),this.orthogonalLine.updateCenterSegmentsPosition()},e}(rn),jn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cn=(Math.abs,function(t){function e(e){var n=t.call(this,e)||this;return n.tmpStartLine=null,n.shouldAddCornerSegmentWhenMoving=!1,n}return jn(e,t),e.prototype._removeTmpStartLine=function(){G(this.tmpStartLine)&&(this.actions.REMOVE_ELEMENT(this.tmpStartLine.centerSegment),this.actions.REMOVE_ELEMENT(this.tmpStartLine),this.tmpStartLine=null)},e.prototype._updateTmpStartLineCenterSegmentsPosition=function(){this.tmpStartLine.updateCenterSegmentPosition()},e.prototype.handleBeforeDragging=function(t){var e=this.getters.getInitialPoint(t),n=(this.dragger.getDeltaXToStartPoint(e),this.dragger.getDeltaYToStartPoint(e),this.line),r=n.isVertical,o=n.isHorizontal,i=this.orthogonalLine.startSegment;if(r||o){if(!this.shouldAddCornerSegmentWhenMoving){this.shouldAddCornerSegmentWhenMoving=!0,this.orthogonalLine.addCornerSegmentStart(i.point);var a=Rt(this.orthogonalLine.cornerSegments);this.line.source=a,this.tmpStartLine=this.orthogonalLine.addTmpStartLine({sourceSegment:i,targetSegment:a})}this.tmpStartLine&&this.tmpStartLine.updateCenterSegmentPosition()}},e.prototype.handleStopDrag=function(){this.shouldAddCornerSegmentWhenMoving=!1,this._removeTmpStartLine(),this.orthogonalLine.refresh(),t.prototype.handleStopDrag&&t.prototype.handleStopDrag.call(this)},e}(Sn)),Ln=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tn=function(t){function e(e){var n=t.call(this,e)||this;return n.tmpEndLine=null,n.shouldAddCornerSegmentWhenMoving=!1,n}return Ln(e,t),e.prototype._removeTmpEndLine=function(){G(this.tmpEndLine)&&(this.actions.REMOVE_ELEMENT(this.tmpEndLine.centerSegment),this.actions.REMOVE_ELEMENT(this.tmpEndLine),this.tmpEndLine=null)},e.prototype._updateTmpEndLineCenterSegmentsPosition=function(){this.tmpEndLine.updateCenterSegmentPosition()},e.prototype._hideLineArrow=function(){this.line.showArrow=!1},e.prototype.handleBeforeDragging=function(t){var e=this.getters.getInitialPoint(t),n=(this.dragger.getDeltaXToStartPoint(e),this.dragger.getDeltaYToStartPoint(e),this.line),r=n.isVertical,o=n.isHorizontal,i=this.orthogonalLine.endSegment;if(r||o){if(!this.shouldAddCornerSegmentWhenMoving){this.shouldAddCornerSegmentWhenMoving=!0,this.orthogonalLine.addCornerSegmentEnd(i.point);var a=kt(this.orthogonalLine.cornerSegments);this.line.target=a,this._hideLineArrow(),this.tmpEndLine=this.orthogonalLine.addTmpEndLine({sourceSegment:a,targetSegment:i})}this.tmpEndLine&&this.tmpEndLine.updateCenterSegmentPosition()}},e.prototype.handleStopDrag=function(){this.shouldAddCornerSegmentWhenMoving=!1,this._removeTmpEndLine(),this.orthogonalLine.refresh(),t.prototype.handleStopDrag&&t.prototype.handleStopDrag.call(this)},e}(Sn),En=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),An=function(t){function e(e){var n=t.call(this,e)||this;return n.orthogonalLine=e.orthogonalLine,n}return En(e,t),e}(Sn),Dn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},In=function(t){function e(e){var n=t.call(this,e)||this,r=e.segment,o=e.point;n.segment=G(r)?r:new rn(Mn({draw:n.draw},o,{fillColor:e.segmentFillColor})),n.handleSegmentAfterDragging=n.handleSegmentAfterDragging.bind(n),n.handleSegmentStopDrag=n.handleSegmentStopDrag.bind(n),n.updateSegmentDrag=n.updateSegmentDrag.bind(n),n.orthogonalLine=e.orthogonalLine;var i=n.segment.dragger;return i.interfaceStopDragList.push(n.handleSegmentStopDrag),i.interfaceDraggingList.push(n.handleSegmentAfterDragging),i.updateList.push(n.updateSegmentDrag),n}return Dn(e,t),e.prototype.translateLinkingToPointWith=function(t,e,n,r){if(!this.orthogonalLine.isSimpleLine){var o=this,i=e.isVertical,a=e.isHorizontal,s=e.isCoincided,u=t.x,c=t.y;if(s){var p=r(e);if(G(p)){if(p.isHorizontal&&G(n)&&this.sharedActions.updateSegmentX(n,u),p.isVertical&&G(n)&&this.sharedActions.updateSegmentY(n,c),p.isCoincided){var l=r(p);G(l)?(l.isVertical&&this.sharedActions.updateSegmentX(n,u),l.isHorizontal&&G(n)&&this.sharedActions.updateSegmentY(n,c)):f()}}else f()}else i&&G(n)&&this.sharedActions.updateSegmentX(n,t.x),a&&G(n)&&this.sharedActions.updateSegmentY(n,t.y)}function f(){G(n)&&o.sharedActions.updateSegmentX(n,u)}},e.prototype.updateSegmentDrag=function(t){if(this.segment.draggable){var e=this.segment.getters.getInitialPoint(t),n=this.segment.dragger,r=n.updateList,o=function(t){return!At(t)}(r),i=n.getDeltaXToPrevPoint(e),a=n.getDeltaYToPrevPoint(e),s=this.segment.point,u=s.x,c=s.y;u+=i,c+=a,this.translateLinkingToPoint({x:u,y:c}),(!o||o&&function(t,e){return Et(It(t,e),t)}(r,this.updateSegmentDrag))&&this.segment.translateToPoint({x:u,y:c})}},e.prototype.handleSegmentAfterDragging=function(t){this.segment.draggable&&!this.orthogonalLine.isSimpleLine&&this.orthogonalLine.updateCenterSegmentsPosition()},e.prototype.contain=function(){},e.prototype.remove=function(){var e=this.segment.dragger;Nt(e.interfaceStopDragList,this.handleSegmentStopDrag),Nt(e.interfaceAfterDraggingList,this.handleSegmentAfterDragging),t.prototype.remove.call(this)},e.prototype.forceRemove=function(){this.segment&&this.segment.remove(),this.remove()},e}(Ft),Rn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kn=function(t){function e(e){return t.call(this,function(t){return t.segmentFillColor="red",t}(e))||this}return Rn(e,t),Object.defineProperty(e.prototype,"startLine",{get:function(){return this.orthogonalLine.startLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCornerSegment",{get:function(){return Rt(this.orthogonalLine.cornerSegments)},enumerable:!0,configurable:!0}),e.prototype._getCornerSegmentToBeCombined=function(){for(var t=this.orthogonalLine.cornerSegments.filter(function(t,e,n){return!Et(e,n)}),e=t.length,n=this.segment.point,r=null,o=0;o<e;o++){var i=t[o],a=i.point;Ze(n,a)<=Yn.COMBINE_INTERVAL&&(r=i)}return r},e.prototype._combineCornerSegment=function(t){if(G(t)){var e=this.orthogonalLine.cornerSegments,n=It(e,t);if(this.translateLinkingToPoint(t.point),this.segment.translateToPoint(t.point),G(n)){var r=e.filter(function(t,e){return e<=n});this.orthogonalLine.removeCornerSegments(r)}}},e.prototype.translateLinkingToPoint=function(t){this.translateLinkingToPointWith(t,this.startLine,this.firstCornerSegment,this.orthogonalLine.getNextLine.bind(this.orthogonalLine))},e.prototype.handleSegmentStopDrag=function(t){if(this.segment.draggable){var e=this._getCornerSegmentToBeCombined();G(e)&&(this._combineCornerSegment(e),this.orthogonalLine.refresh()),this.orthogonalLine.handleStartSegmentStopDrag(t)}},e}(In),Nn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zn=function(t){function e(e){return t.call(this,function(t){return t.segmentFillColor="blue",t}(e))||this}return Nn(e,t),Object.defineProperty(e.prototype,"endLine",{get:function(){return this.orthogonalLine.endLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCornerSegment",{get:function(){return kt(this.orthogonalLine.cornerSegments)},enumerable:!0,configurable:!0}),e.prototype._getCornerSegmentToBeCombined=function(){for(var t=this.orthogonalLine.cornerSegments.filter(function(t,e,n){return!Lt(e)}),e=t.length,n=this.segment.point,r=0;r<e;r++){var o=t[r],i=o.point;if(Ze(n,i)<=Yn.COMBINE_INTERVAL)return o}return null},e.prototype._combineCornerSegment=function(t){if(G(t)){var e=this.orthogonalLine.cornerSegments,n=It(e,t);if(this.translateLinkingToPoint(t.point),this.segment.translateToPoint(t.point),G(n)){var r=e.filter(function(t,e){return e>=n});this.orthogonalLine.removeCornerSegments(r)}}},e.prototype.translateLinkingToPoint=function(t){this.translateLinkingToPointWith(t,this.endLine,this.lastCornerSegment,this.orthogonalLine.getPrevLine.bind(this.orthogonalLine))},e.prototype.handleSegmentStopDrag=function(e){if(this.segment.draggable){var n=this._getCornerSegmentToBeCombined();G(n)&&(this._combineCornerSegment(n),this.orthogonalLine.refresh()),this.orthogonalLine.handleEndSegmentStopDrag(e),t.prototype.handleStopDrag&&t.prototype.handleStopDrag.call(this)}},e}(In),Bn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Un=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Hn=(Math.abs,Math.min),Fn=Math.max,Yn=function(t){function e(e){var n=t.call(this,e)||this;n.startLinking=null,n.endLinking=null,n.cornerSegments=[],n.startLine=null,n.endLine=null,n.innerLines=[],n.showArrow=!0,n.showCenterSegment=!0,n.showCorner=!0,n.startLineFillColor="red",n.endLineFillColor="blue",n.innerLineFillColor="grey",n.startSegmentFillColor="darkRed",n.endSegmentFillColor="darkBlue",n.addedToBottom=!1;var r=e.points,o=void 0===r?[]:r,i=e.startSegment,a=e.endSegment,s=e.corners,u=void 0===s?[]:s,c=o.length;if(n.showArrow=G(e.showArrow)?e.showArrow:n.showArrow,n.showCenterSegment=G(e.showCenterSegment)?e.showCenterSegment:n.showCenterSegment,n.showCorner=G(e.showCorner)?e.showCorner:n.showCorner,n.startLineFillColor=G(e.startLineFillColor)?e.startLineFillColor:n.startLineFillColor,n.endLineFillColor=G(e.endLineFillColor)?e.endLineFillColor:n.endLineFillColor,n.innerLineFillColor=G(e.innerLineFillColor)?e.innerLineFillColor:n.innerLineFillColor,n.startSegmentFillColor=G(e.startSegmentFillColor)?e.startSegmentFillColor:n.startSegmentFillColor,n.endSegmentFillColor=G(e.endSegmentFillColor)?e.endSegmentFillColor:n.endSegmentFillColor,n.addedToBottom=G(e.addedToBottom)?e.addedToBottom:n.addedToBottom,G(i)&&G(a))return n.startLinking=new kn({draw:n.draw,orthogonalLine:n,segment:i}),n.endLinking=new zn({draw:n.draw,orthogonalLine:n,segment:a}),n.cornerSegments=u.map(function(t){return n.createCornerSegment(t)}),n._initializeCornerSegments(),n._refreshLines(),n;if(c<2)throw"Orthgonal line: Require at lest 2 points!";if(c>=2){var p=o.map(cn(n)),l=Rt(p),f=kt(p);n.startLinking=new kn({draw:n.draw,orthogonalLine:n,segment:l}),n.endLinking=new zn({draw:n.draw,orthogonalLine:n,segment:f}),n.cornerSegments=p.filter(Dt).filter(Mt),n._initializeCornerSegments(),n._refreshLines()}return n}return Bn(e,t),e.prototype.contain=function(t,e){return this.lines.some(function(n){return n.contain(t,e)})},Object.defineProperty(e.prototype,"startSegment",{get:function(){return this.startLinking.segment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endSegment",{get:function(){return this.endLinking.segment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segments",{get:function(){return[this.startSegment].concat(this.cornerSegments,[this.endSegment])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lines",{get:function(){return[this.startLine].concat(this.innerLines,[this.endLine])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerSegments",{get:function(){return this.lines.map(function(t){return t.centerSegment})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSimpleLine",{get:function(){return 2===this.segments.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"notSimpleLine",{get:function(){return!this.isSimpleLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=null,e=null,n=null,r=null;return this.segments.map(function(o){var i=o.x,a=o.y;l()(t)&&(t=i),G(t)&&(t=Hn(i,t)),l()(e)&&(e=i),G(e)&&(e=Fn(i,e)),l()(n)&&(n=a),G(n)&&(n=Hn(a,n)),l()(r)&&(r=a),G(r)&&(r=Fn(a,r))}),t=G(t)?t:0,e=G(e)?e:0,n=G(n)?n:0,r=G(r)?r:0,{left:t,right:e,top:n,bottom:r}},enumerable:!0,configurable:!0}),e.prototype.getNextLine=function(t){var e=function(t,e){for(var n=null,r=0;r<t.length;r++)t[r]===e&&(n=r);return n}(this.lines,t);return G(e)?this.lines[e+1]:null},e.prototype.getPrevLine=function(t){var e=It(this.lines,t);return G(e)?this.lines[e-1]:null},e.prototype.createStartSegment=function(t){return new rn(Un({draw:this.draw,orthogonalLine:this,fillColor:this.startSegmentFillColor},t))},e.prototype.createEndSegment=function(t){return new rn(Un({draw:this.draw,orthogonalLine:this,fillColor:this.endSegmentFillColor},t))},e.prototype.createCornerSegment=function(t){return new xn(Un({draw:this.draw},t,{orthogonalLine:this,fillColor:"grey",draggable:!1,show:this.showCorner}))},e.prototype.createStartCenterSegment=function(t){return new Cn(Un({draw:this.draw,orthogonalLine:this,show:this.showCenterSegment},t))},e.prototype.createEndCenterSegment=function(t){return new Tn(Un({draw:this.draw,orthogonalLine:this,show:this.showCenterSegment},t))},e.prototype.createEndInnerCenterSegment=function(t){return new An(Un({draw:this.draw,orthogonalLine:this,show:this.showCenterSegment},t))},e.prototype.createStartLine=function(t){var e=this.isSimpleLine,n=this.showArrow;return new dn(Un({draw:this.draw},t,{orthogonalLine:this,fillColor:this.isSimpleLine?this.innerLineFillColor:this.startLineFillColor,draggable:!1,showArrow:!!e&&n,isPart:!0,shouldRenderInMiniMap:this.shouldRenderInMiniMap,addedToBottom:this.addedToBottom}))},e.prototype.createEndLine=function(t){var e=this.showArrow;return new bn(Un({draw:this.draw},t,{orthogonalLine:this,fillColor:this.endLineFillColor,showArrow:e,draggable:!1,isPart:!0,shouldRenderInMiniMap:this.shouldRenderInMiniMap,addedToBottom:this.addedToBottom}))},e.prototype.createInnerLine=function(t){return new _n(Un({draw:this.draw},t,{orthogonalLine:this,draggable:!1,fillColor:this.innerLineFillColor,isPart:!0,shouldRenderInMiniMap:this.shouldRenderInMiniMap,addedToBottom:this.addedToBottom}))},e.prototype.addCornerSegmentStart=function(t){var e=this.createCornerSegment(t);this.cornerSegments=[e].concat(this.cornerSegments)},e.prototype.addCornerSegmentEnd=function(t){var e=this.createCornerSegment(t);this.cornerSegments=this.cornerSegments.concat([e])},e.prototype.removeCornerSegment=function(t){Nt(this.cornerSegments,t),this.actions.REMOVE_ELEMENT(t)},e.prototype.removeCornerSegments=function(t){t.map(this.removeCornerSegment.bind(this))},e.prototype.addTmpStartLine=function(t){return this.createStartLine(t)},e.prototype.addTmpEndLine=function(t){return this.createEndLine(t)},e.prototype._createCornerSegmentBetween=function(t,e){this.segments;var n=t.x,r=t.y,o=e.x,i=e.y;if(n!==o&&r!==i){var a={x:n,y:i};return this.createCornerSegment(a)}},e.prototype._initializeCornerSegments=function(){var t=this,e=(this.segments.map(function(t){return t.point}),function(t){return t.map(function(t){return u(t)})}(this.segments.map(function(t){return t.point})));f(this.startSegment)&&e.map(function(e,n,r){if(Tt(n)){var o=r[n-1];if(pn(o,e)){var i=t._createCornerSegmentBetween(o,e);f(i)&&t._insertCornerSegment(e,i)}}});var n=this.cornerSegments.filter(function(t,e,n){if(!Lt(e)&&!Et(e,n)){var r=function(t,e){return t[e-1]}(n,e),o=function(t,e){return t[e+1]}(n,e),i=t.x,a=t.y,s=r.x,u=r.y,c=o.x,p=o.y;return i===s&&i===c||a===u&&a===p}return!1});this.removeCornerSegments(n)},e.prototype._insertCornerSegment=function(t,e){var n=It(this.segments.map(function(t){return t.id}),t.id);if(G(n)){var r=n-1;this.cornerSegments.splice(r,0,e)}},e.prototype._refreshLines=function(){var t=this;this._removeLines();var e=this.segments,n=null,r=null,o=[];e.reduce(function(i,a,s){if(!l()(i)&&!l()(a)){if(1===s)n=t.createStartLine({sourceSegment:i,targetSegment:a});else if(Et(s,e))r=t.createEndLine({sourceSegment:i,targetSegment:a});else{var u=t.createInnerLine({sourceSegment:i,targetSegment:a});o.push(u)}return a}}),this.startLine=n,this.endLine=r,this.innerLines=o},e.prototype._removeLines=function(){var t=this;this.lines.map(function(e){G(e)&&(t.actions.REMOVE_ELEMENT(e.centerSegment),t.actions.REMOVE_ELEMENT(e))})},e.prototype.refresh=function(){this._refreshLines()},e.prototype.translateStartToPoint=function(t){G(this.startSegment)&&this.startSegment.translateToPoint(t),this.refresh()},e.prototype.translateTargetToPoint=function(t){G(this.endSegment)&&this.endSegment.translateToPoint(t),this.refresh()},e.prototype.render=function(){},e.prototype.updateCenterSegmentsPosition=function(){this.lines.map(function(t){return t.updateCenterSegmentPosition()})},e.prototype.select=function(){this.sharedActions.selectCells(this.lines),t.prototype.select.call(this)},e.prototype.updateDrag=function(t,e){if(this.draggable){var n=this.getters.getInitialPoint(t),r=e.getDeltaXToPrevPoint(n),o=e.getDeltaYToPrevPoint(n);this.sharedActions.translateSegments(this.segments,r,o),this.updateCenterSegmentsPosition()}},e.prototype.reGenerate=function(t){this.removeChildrenElements();var e=t.map(cn(this));e[0],e[e.length-1];this.cornerSegments=e.filter(Dt).filter(Mt),this._initializeCornerSegments(),this._refreshLines()},e.prototype.removeChildrenElements=function(){this.actions.REMOVE_ELEMENTS(this.cornerSegments.concat(this.lines,this.centerSegments,[this.startLinking,this.endLinking])),this.startLinking=null,this.endLinking=null,this.cornerSegments=[]},e.prototype.forceRemove=function(){this.startLinking&&this.startLinking.forceRemove(),this.endLinking&&this.endLinking.forceRemove(),this.removeChildrenElements(),this.remove()},e.prototype.handleStartSegmentStopDrag=function(t){},e.prototype.handleEndSegmentStopDrag=function(t){},e.COMBINE_INTERVAL=10,e}(_e),Wn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kn=Math.sin,Vn=Math.cos,Xn=Math.PI,Gn=function(t){function e(n){var r=t.call(this,function(t){var n=t.x,r=void 0===n?e.DEFAULT_CX:n,o=t.y,i=void 0===o?e.DEFAULT_CY:o,a=t.radius,s=void 0===a?e.DEFAULT_RADIUS:a,u=2*s,c=(Vn(Xn/6),Kn(Xn/6),Ae({left:r-s,top:i-s,width:u,height:u}));c.topCenter,c.leftBottom,c.rightBottom,c.leftCenter,c.rightCenter,c.bottomCenter;return t.points=function(t,e,n,r){void 0===r&&(r=6);for(var o=[],i=0;i<r;i++){var a=2*i*Xn/r;o.push({x:t+n*Vn(a),y:e+n*Kn(a)})}return o}(r,i,s),t.sizable=!1,t.defaultSegmentHandleLength=.35726558990816404*s,t.curveUsesCanvasApi=!0,t}(n))||this;r.type=bt,r.x=e.DEFAULT_CX,r.y=e.DEFAULT_CY,r.radius=e.DEFAULT_RADIUS;var o=n.x,i=n.y,a=n.radius;return r.x=G(o)?o:r.x,r.y=G(i)?i:r.y,r.radius=G(a)?a:r.radius,r.sizable=G(n.sizable)?n.sizable:r.sizable,r.rotatable=G(n.rotatable)?n.rotatable:r.rotatable,r.sharedActions.hideSegments(r.segments),r}return Wn(e,t),e.prototype.translate=function(e,n){t.prototype.translate.call(this,e,n),this.x=this.x+e,this.y=this.y+n},e.DEFAULT_CX=0,e.DEFAULT_CY=0,e.DEFAULT_RADIUS=200,e}(Ee),Zn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qn=function(t){function e(e){var n=t.call(this,e)||this;return n.left=0,n.top=0,n.width=null,n.height=null,n.image=new Image,n.src="",n.strokeColor=null,n.src=G(e.src)?e.src:n.src,n.strokeColor=G(e.strokeColor)?e.strokeColor:n.strokeColor,n.image.src=n.src,n.image.onload=function(){var t=e.width,r=e.height,o=n.image,i=o.width,a=o.height;if(G(t)&&G(r)&&(n.updateWidth(t),n.updateHeight(r)),G(t)&&l()(r)){n.updateWidth(t);var s=a/i*t;n.updateHeight(s)}if(G(r)&&l()(t)){n.updateHeight(r);var u=i/a*r;n.updateWidth(u)}l()(t)&&l()(r)&&(n.updateWidth(i),n.updateHeight(a));var c=n,p=c.width,f=c.height,h=e.x,g=e.y,d=e.left,y=e.top;G(h)&&G(g)?(n.left=h-p/2,n.top=g-f/2):(n.left=G(d)?d:n.left,n.top=G(y)?y:n.top),n.render(),n.interfaceOnImageLoaded&&n.interfaceOnImageLoaded()},n}return Zn(e,t),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.left,e=this.top,n=this.width,r=this.height,o=Ae({left:t,top:e,width:n,height:r}),i=o.leftTop,a=o.rightTop,s=o.rightBottom,u=o.leftBottom;return Xt([i,a,s,u])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=this.left,e=this.top;return{left:t,top:e,right:t+this.width,bottom:e+this.height}},enumerable:!0,configurable:!0}),e.prototype.contain=function(t,e){return this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.render=function(){var t=this,e=t.left,n=t.top,r=t.width,o=t.height,i=t.image,a=t.getters,s=t.strokeColor,u=t.strokeWidth;if(G(r)&&G(o)){var c=a.ctx;G(s)&&(c.lineWidth=u,c.strokeStyle=s,c.stroke(this.path2d)),c.drawImage(i,e,n,r,o)}},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e);this.translate(n,r)}},e.prototype.translate=function(t,e){this.left=this.left+t,this.top=this.top+e},e.prototype.updateWidth=function(t){this.width=t},e.prototype.updateHeight=function(t){this.height=t},e.prototype.updateLeft=function(t){this.left=t},e.prototype.updateTop=function(t){this.top=t},e.prototype.udpateSrc=function(t){this.src=t,this.image.src=t},e.prototype.sizeOnCenter=function(t,e){var n=t-this.kX,r=e-this.kX;this.kX=t,this.kY=e;var o=this.left,i=this.top,a=this.width,s=this.height;this.width=a*(1+n),this.height=s*(1+r),this.left=o-n*a/2,this.top=i-r*s/2},e.DEFAULT_WIDTH=0,e.DEFAULT_HEIGHT=0,e}(Ft),Jn=["angle","draggable","fill","height","id","shouldSelect","left","type","top","width"];function $n(t){return Y()(t)||B()(t)||H()(t)||m()(t)}var qn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},tr=function(){function t(t,e){this.drawStore=t,this.getters=e}return Object.defineProperty(t.prototype,"sharedActions",{get:function(){return this.getters.draw.sharedActions},enumerable:!0,configurable:!0}),t.prototype.UPDATE_STORE=function(t){var e=S()(t);Object.keys(t).map(function(n){t[n]=e[n]})},t.prototype.UPDATE_DRAW=function(t){this.drawStore.draw=t},t.prototype.UPDATE_CANVAS=function(t){this.drawStore.canvas=t,this.getters.setCtx(t.getContext("2d"))},t.prototype.UPDATE_TMP_CANVAS=function(t){this.drawStore.tmpCanvas=t,this.getters.setTmpCtx(t.getContext("2d"))},t.prototype.INTIALIZE_DRAW_ROOT_ID=function(){this.drawStore.rootId=this.getters.generateUniqueDrawRootId()},t.prototype.UPDATE_DRAW_ROOT_ID=function(t){this.drawStore.rootId=t},t.prototype.UPDATE_SETTING=function(t){this.drawStore.setting=t},t.prototype.UPDATE_VIEWPORT=function(t){this.drawStore.viewPort=t},t.prototype.UPDATE_RENDERER=function(t){this.drawStore.renderer=t},t.prototype.UPDATE_SELECTOR=function(t){this.drawStore.selector=t},t.prototype.UPDATE_INTERACTION=function(t){this.drawStore.interaction=t},t.prototype.UPDATE_MINIMAP=function(t){this.drawStore.miniMap=t},t.prototype.UPDATE_GRID=function(t){this.drawStore.grid=t},t.prototype.UPDATE_TEST_UTILS=function(t){this.drawStore.testUtils=t},t.prototype.UPDATE_TEXT_INPUT=function(t){this.drawStore.textInput=t},t.prototype.ADD_ELEMENT=function(t,e,n,r){var o=function(){var t;return(t={}).segment=rn,t[gt]=Me,t[dt]=We,t[yt]=un,t["orthogonal-line"]=Yn,t[vt]=Jt,t[ht]=Ve,t[bt]=Gn,t[mt]=an,t.image=Qn,t[xt]=qt,t}()[e];if(!l()(o)){var i=new o(qn({draw:t},n));i.exportable=!0;var a=function(t){var e={};return M()(t,function(t,n){(N()(t)||B()(t)||Y()(t)||H()(t)||K()(t)||l()(t))&&(e[n]=t)}),e}(i),s=qn({__instance__:i},a);return l()(r)&&this.getters.storeActiveElements.push(s),l()(r)||this.getters.getStoreElementsByPanelId(r).push(s),i}console.log('Type not found: "'+e+'"')},t.prototype.REMOVE_ELEMENT=function(t){G(t)&&Nt(this.getters.cellList,t)},t.prototype.REMOVE_ELEMENTS=function(t){t.map(function(t){return t&&t.remove()}),t.map(this.REMOVE_ELEMENT.bind(this))},t.prototype.ADD_PANEL=function(t){this.getters.storePanels.push({id:this.getters.generateUniqueDrawElementId(),name:t,elements:[]})},t.prototype.MODIFY_ACTIVE_PANEL_ID=function(t){this.drawStore.activePanelId=t},t.prototype.ADD_ELEMENT_TO_CELL_LIST=function(t){var e=t.addedToBottom,n=void 0!==e&&e;!n&&this.drawStore.cellList.push(t),n&&this.drawStore.cellList.unshift(t)},t.prototype.UPDATE_STORE_ELEMENTS_BY_THEIR_INSTANCES=function(){this.drawStore.panels.map(function(t,e){t.elements.map(function(t){return function(e,n){var r=e.__instance__;if(f(r)){var o=Object.keys(r),i=A()(o,Jn);i.map(function(t,e){return function(n){this.drawStore.panels[t].elements[e][n]=this.drawStore.panels[t].elements[e].__instance__[n]}}(t,n))}}}(e))})},t.prototype.UPDATE_SYNC_STORE_ROOT_ID=function(t){this.drawStore.syncStore.rootId=t},t.prototype.REFRESH_SYNC_STORE_ROOT_ID=function(){var t=this.drawStore.rootId;this.UPDATE_SYNC_STORE_ROOT_ID(t)},t.prototype.UPDATE_SYNC_STORE_ELEMENTS=function(t){this.drawStore.syncStore.elements=t},t.prototype.REFRESH_SYNC_STORE_ELEMENTS=function(){var t=[];this.drawStore.cellList.filter(function(t){return t.exportable}).map(function(e){var n={__instance__:null,data:null};return n.data=function(t){var e={};return M()(t,function(t,n){(function(t){return $n(t)||x()(t)&&t.every($n)||N()(t)&&R()(t).every($n)})(t)&&(e[n]=t)}),e}(e),t.push(n),n}),this.UPDATE_SYNC_STORE_ELEMENTS(t)},t.prototype.START_DRAG_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);this.sharedActions.startDragCell(n,t)},t.prototype.START_DRAG_CELLS_SHOULD_SELECT=function(t){var e=this;this.getters.cellsShouldSelect.map(function(n){e.sharedActions.startDragCell(n,t)})},t.prototype.DRAGGING_CELLS_SHOULD_DRAG=function(t){var e=this;this.getters.cellsShouldDrag.map(function(n){e.sharedActions.draggingCell(n,t)})},t.prototype.STOP_DRAG_CELLS_SHOULD_DRAG=function(t){var e=this;this.getters.cellsShouldDrag.map(function(n){e.sharedActions.stopDragCell(n,t)})},t.prototype.CLICK_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);f(n)&&this.sharedActions.clickCell(n,t)},t.prototype.HOVER_MOST_TOP_CELL_FOCUSED=function(t,e){var n=this.getters.getInitialPoint(t),r=this.getters.getTopCell(n),o=e.prevHovingDsElement;r&&r!==o&&this.sharedActions.mouseInCell(r,t),o&&r!==o&&this.sharedActions.mouseOutCell(o,t),G(r)&&this.sharedActions.mouseMoveCell(r,t),e.updatePrevHovingDsElement(r)},t.prototype.DOUBLE_CLICK_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);f(n)&&this.sharedActions.doubleClickCell(n,t)},t.prototype.DESELECT_ALL_CELLS=function(){this.getters.selectedCells.map(this.sharedActions.deselectCell)},t.prototype.SELECT_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getTopCell(t);this.sharedActions.selectCell(e)},t.prototype.SELECT_CELLS_IN_SELECTOR_RIGION=function(){this.getters.cellsInSelectorRigion.map(this.sharedActions.selectCell)},t.prototype.APPEND_TEXT_INPUT_TO_DOCUMENT_BODY=function(){var t=this.getters.textInput;if(G(t)){var e=t.input;G(e)&&document.body.appendChild(e)}},t}(),er=[dt,Pt,_t],nr=Math.sqrt,rr=Math.pow,or=(Math.cos,Math.sin,Math.PI,Math.abs,function(t,e,n,r){var o=t.x,i=t.y,a=r.x,s=r.y;return{x:a+(o-a)*e,y:s+(i-s)*n}});var ir=function(){function t(t,e){this.drawStore=t,this.getters=e}return t.prototype.startDragCell=function(t,e){t.dragger.start(e)},t.prototype.draggingCell=function(t,e){t.dragger.dragging(e)},t.prototype.stopDragCell=function(t,e){t.dragger.stop(e)},t.prototype.clickCell=function(t,e){t.handleClick&&t.handleClick(e)},t.prototype.doubleClickCell=function(t,e){t.handleDoubleClick&&t.handleDoubleClick(e)},t.prototype.mouseInCell=function(t,e){t.handleMouseIn&&t.handleMouseIn(e)},t.prototype.mouseMoveCell=function(t,e){t.handleMouseMove&&t.handleMouseMove(e)},t.prototype.mouseOutCell=function(t,e){t.handleMouseOut&&t.handleMouseOut(e)},t.prototype.rotateCell=function(t,e){t.rotate(e)},t.prototype.selectCell=function(t){t.select()},t.prototype.selectCells=function(t){t.map(function(t){return t.select()})},t.prototype.deselectCell=function(t){t.deselect()},t.prototype.deselectCells=function(t){t.map(function(t){return t.deselect()})},t.prototype.enableCellRotate=function(t){t.shouldRotate=!0},t.prototype.disableCellRotate=function(t){t.shouldRotate=!1},t.prototype.renderParticle=function(t){t.render()},t.prototype.renderElement=function(t,e){void 0===e&&(e=!1),e||t.render(),e&&(G(t.renderFnInMiniMap)&&t.renderFnInMiniMap(),l()(t.renderFnInMiniMap)&&t.render())},t.prototype.updateSegmentPrevious=function(t,e){t.previous=e},t.prototype.updateSegmentNext=function(t,e){t.next=e},t.prototype.updateSegmentX=function(t,e){t.x=e},t.prototype.updateSegmentY=function(t,e){t.y=e},t.prototype.updateSegmentPoint=function(t,e){var n=e.x,r=e.y;t.x=n,t.y=r},t.prototype.ajustSegmentPreviousAndNext=function(t,e){var n=e.length;if(n>1)for(var r=n-1,o=e[0],i=e[r],a=0;a<n;a++){if(e[a]===t){var s=c(a)?i:e[a-1],u=Et(a,e)?o:e[a+1];this.updateSegmentPrevious(t,s),this.updateSegmentNext(t,u)}}function c(t){return 0===t}},t.prototype.ajustSegmentsPreviousAndNext=function(t){var e=this;t.map(function(n){return e.ajustSegmentPreviousAndNext(n,t)})},t.prototype.showSegment=function(t){t.show=!0},t.prototype.showSegments=function(t){var e=this;t.map(function(t){return e.showSegment(t)})},t.prototype.hideSegment=function(t){t.show=!1},t.prototype.hideSegments=function(t){var e=this;t.map(function(t){return e.hideSegment(t)})},t.prototype.renderSegments=function(t){var e=this;t.map(function(t){return e.renderParticle(t)})},t.prototype.translateSegment=function(t,e,n){t.translate(e,n)},t.prototype.translateSegments=function(t,e,n){t.map(function(t){return t.translate(e,n)})},t.prototype.translateSegmentTo=function(t,e,n){t.translateTo(e,n)},t.prototype.translateSegmentsTo=function(t,e,n){console.log(t,e,n),t.map(function(t){return t.translateTo(e,n)})},t.prototype.translateSegmentToPoint=function(t,e){t.translateToPoint(e)},t.prototype.translateSegmentsToPoint=function(t,e){t.map(function(t){return t.translateToPoint(e)})},t.prototype.rotateSegment=function(t,e,n){var r=t.handleIn,o=t.handleOut;this.rotateHandle(r,e,n),this.rotateHandle(o,e,n);var i=c(t,e,n);this.updateSegmentPoint(t,i)},t.prototype.rotateSegments=function(t,e,n){var r=this;t.map(function(t){return r.rotateSegment(t,e,n)})},t.prototype.sizeSegment=function(t,e,n,r){var o=t.handleIn,i=t.handleOut,a=t.path.angle;this.sizeHandle(o,e,n,r),this.sizeHandle(i,e,n,r);var s=c(t,-a),u=c(r,-a),p=or(s,e,n,u),l=c(p,a);this.updateSegmentPoint(t,l)},t.prototype.sizeSegments=function(t,e,n,r){var o=this;t.map(function(t){return o.sizeSegment(t,e,n,r)})},t.prototype.showSegmentHandle=function(t){this.showHandle(t.handleIn),this.showHandle(t.handleOut)},t.prototype.showSegmentsHandles=function(t){var e=this;t.map(function(t){return e.showSegmentHandle(t)})},t.prototype.hideSegmentHandle=function(t){this.hideHandle(t.handleIn),this.hideHandle(t.handleOut)},t.prototype.hideSegmentsHandles=function(t){var e=this;t.map(function(t){return e.hideSegmentHandle(t)})},t.prototype.clearSegmentHandle=function(t){this.clearHandle(t.handleIn),this.clearHandle(t.handleOut)},t.prototype.clearSegmentsHandles=function(t){var e=this;t.map(function(t){return e.clearSegmentHandle(t)})},t.prototype.updateHandleRelativePoint=function(t,e){t.relativePoint=u(e)},t.prototype.adjustHandleParterPoint=function(t){var e,n=t.partner,r=t.segment,o=t.point,i=o.x,a=o.y,s=n.point,u=(s.x,s.y,r.point),c={x:i-u.x,y:a-u.y},p=function(t){var e=t.x,n=t.y;return nr(rr(e,2)+rr(n,2))}(c),l=(n.length,{x:-c.x,y:-c.y});e={x:l.x,y:l.y},this.updateHandleRelativePoint(n,e)},t.prototype.showHandle=function(t){t.show=!0},t.prototype.hideHandle=function(t){t.show=!1},t.prototype.rotateHandle=function(t,e,n){var r=t.point,o=t.segmentPoint,i=(t.relativePoint,r.x,r.y,c(r,e,n)),a=c(o,e,n),s={x:i.x-a.x,y:i.y-a.y};this.updateHandleRelativePoint(t,s)},t.prototype.sizeHandle=function(t,e,n,r){var o=t.point,i=t.segmentPoint,a=t.relativePoint,s=t.segment.path.angle,u=c(o,-s),p=c(i,-s),l=(c(a,-s),c(r,-s)),f=(u.x,u.y,or(u,e,n,l)),h=c(f,s),g=or(p,e,n,l),d=c(g,s),y={x:h.x-d.x,y:h.y-d.y};this.updateHandleRelativePoint(t,y)},t.prototype.clearHandle=function(t){this.updateHandleRelativePoint(t,Ce)},t.prototype.sizeItem=function(t,e,n,r){t.size(e,n,r)},t.prototype.updatePathSegments=function(t,e){t.updateSegments(e)},t.prototype.updatePoint=function(t,e,n){t.x=e,t.y=n},t.prototype.translatePoint=function(t,e,n){var r=t.x,o=t.y;this.updatePoint(t,r+e,o+n)},t.prototype.applyRotationArrow=function(t){t.rotationArrow.render()},t.prototype.applyScalePoint=function(t){},t.prototype.applySelectionBorder=function(t){var e=t.shouldSelect,n=t.type,r=(t.draw,t.path),o=this.getters.ctx;e&&!C()(er,n)&&(o.save(),o.lineWidth=1,o.setLineDash([5,5]),o.strokeStyle="black",o.stroke(r),o.restore())},t.prototype.updateTheTextOfDrawText=function(t,e){t.text=e},t.prototype.translateDrawText=function(t,e,n){t.x=t.x+e,t.y=t.y+n},t.prototype.updateTextInputTarget=function(t,e){t.target=e},t.prototype.mockDragCellPerformanceTest=function(t,e){return function(t,e){void 0===e&&(e=100);var n=null,r={x:0,y:0},o=performance.now();t.dragger.enable=!0,t.dragger.start(r);for(var i=0;i<=e;i++)i<e&&(r={x:1*i,y:1*i},t.dragger.dragging(r)),i===e&&(t.dragger.stop(r),n=performance.now()-o);return n}(t,e)},t.prototype.averageMockDragCellPerformanceTest=function(t,e,n){var r=this;return function(t,e){void 0===e&&(e=1);for(var n=0,r=0;r<e;r++)n+=t();return n/e}(function(){return r.mockDragCellPerformanceTest(t,e)},n)},t.prototype.forceRemoveFlows=function(t){t.map(function(t){return t&&t.forceRemove()})},t}(),ar=function(t,e,n){if(void 0===e&&(e=.001),void 0===n&&(n=new Path2D),t.length<=1)return null;var r=e<1?e:1,o=[],i=t[t.length-1];o.push(t[0]);for(var a=r;a<=1;a+=r){var s=sr(t,a);o.push(s)}return o.push(i),function(t,e){return t.map(function(t,n,r){r.length,e.lineTo(t.x,t.y)}),e}(o,n),n};function sr(t,e){var n,r=t;return function t(){var i=r.length;if(i>1){for(var a=[],s=0;s<i-1;s++){var u=r[s],c=r[s+1],p=o(u,c,e);a.push(p)}return r=a,void t()}1===i&&(n=r[0])}(),n;function o(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}}function ur(t,e,n,r){for(var o,i,a,s,u,c,p,l,f=t.x,h=t.y,g=e.x,d=e.y,y=n.x,v=n.y,b=r.x,m=r.y,P=(Math.pow,Math.sqrt),_=Math.min,w=Math.max,x=Math.abs,O=new Array,S=[new Array,new Array],j=new Array,C=0;C<2;++C)if(0==C?(i=6*f-12*g+6*y,o=-3*f+9*g-9*y+3*b,a=3*g-3*f):(i=6*h-12*d+6*v,o=-3*h+9*d-9*v+3*m,a=3*d-3*h),x(o)<1e-12){if(x(i)<1e-12)continue;0<(s=-a/i)&&s<1&&O.push(s)}else l=P(p=i*i-4*a*o),p<0||(0<(u=(-i+l)/(2*o))&&u<1&&O.push(u),0<(c=(-i-l)/(2*o))&&c<1&&O.push(c));for(var L,T,E,A=O.length,D=A;A--;)L=(E=1-(s=O[A]))*E*E*f+3*E*E*s*g+3*E*s*s*y+s*s*s*b,S[0][A]=L,T=E*E*E*h+3*E*E*s*d+3*E*s*s*v+s*s*s*m,S[1][A]=T,j[A]={X:L,Y:T};return O[D]=0,O[D+1]=1,j[D]={X:f,Y:h},j[D+1]={X:b,Y:m},S[0][D]=f,S[1][D]=h,S[0][D+1]=b,S[1][D+1]=m,O.length=S[0].length=S[1].length=j.length=D+2,{left:_.apply(null,S[0]),top:_.apply(null,S[1]),right:w.apply(null,S[0]),bottom:w.apply(null,S[1])}}var cr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pr=(Math.PI,function(t){function e(e){var n=t.call(this,e)||this;n.segment1=e.segment1,n.segment2=e.segment2,n.handle1=n.segment1.handleOut,n.handle2=n.segment2.handleIn,n.path=e.path;var r=n.drawStore.setting,o=r.curveUsesCanvasApi,i=r.curveRate;return n.useCanvasCurve=!!G(o)&&o,n.useCanvasCurve=G(e.useCanvasCurve)?e.useCanvasCurve:n.useCanvasCurve,n.t=G(i)&&0!==i?i:1,n.t=G(e.t)&&0!==e.t?e.t:n.t,n}return cr(e,t),Object.defineProperty(e.prototype,"point1",{get:function(){return this.segment1.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point2",{get:function(){return this.segment2.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handle1Point",{get:function(){return this.handle1.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handle2Point",{get:function(){return this.handle2.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevSegment",{get:function(){return this.segment1.previous},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextSegment",{get:function(){return this.segment2.next},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevPoint",{get:function(){return this.prevSegment.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextPoint",{get:function(){return this.nextSegment.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=new Path2D,e=this,n=e.handle1Point,r=e.handle2Point,o=e.point1,i=e.point2,a=e.useCanvasCurve,s=e.t;return!a&&ar([o,n,r,i],s,t),a&&(t.moveTo(o.x,o.y),t.bezierCurveTo(n.x,n.y,r.x,r.y,i.x,i.y)),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=this.handle1Point,e=this.handle2Point;return ur(this.point1,t,e,this.point2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsCenter",{get:function(){return this.sharedGetters.getBoundsCenter(this.bounds)},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx;t.save(),t.lineWidth=1,t.strokeStyle="#00f0ff",t.stroke(this.path2d),t.restore()},e}(h)),lr=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(e){var n=e.x,r=e.y;return new t(this.x+n,this.y+r)},t.prototype.subtract=function(e){var n=e.x,r=e.y;return new t(this.x-n,this.y-r)},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e)},t.prototype.divide=function(e){return new t(this.x/e,this.y/e)},t.prototype.rotate=function(e,n){var r=n.x,o=void 0===r?0:r,i=n.y,a=void 0===i?0:i,s=e*Math.PI/180,u={x:this.x-o,y:this.y-a},c=u.x,p=u.y,l={x:c*Math.cos(s)-p*Math.sin(s)+o,y:c*Math.sin(s)+p*Math.cos(s)+a};return new t(l.x,l.y)},t}(),fr=Math.min,hr=Math.max,gr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},dr=Math.PI,yr=(Math.min,Math.max,function(){function t(){}return t.prototype.getCurves=function(t,e,n,r){var o=t.length;if(o<=1)return[];for(var i=[],a=t[0].path,s=0;s<o;s++){var u=t[s],c=l(s)?t[0]:t[s+1],p=new pr({draw:r,segment1:u,segment2:c,path:a,useCanvasCurve:e,t:n});i.push(p)}return i;function l(t){return t===o-1}},t.prototype.getSegmentsCenter=function(t){return function(t){var e=t.map(function(t){return t.x}),n=t.map(function(t){return t.y});return{x:(fr.apply(void 0,e)+hr.apply(void 0,e))/2,y:(fr.apply(void 0,n)+hr.apply(void 0,n))/2}}(t)},t.prototype.createSegmentByPoint=function(t,e,n){void 0===n&&(n={});var r=t.x,o=t.y;return new rn(gr({draw:e,x:r,y:o},n))},t.prototype.getPerpHandleRelativePoint=function(t,e,n){var r=e?e.defaultHandleLength:rt,o=new lr(t.point.x,t.point.y),i=new lr(n.point.x,n.point.y),a=new lr((o.x+i.x)/2,(o.y+i.y)/2),s=new lr(e.x,e.y),u=new Be(s,a).rotate(-90).unit;return{x:r*u.x,y:r*u.y}},t.prototype.getCurveInitialBounds=function(t){var e=t.handle1Point,n=t.handle2Point,r=t.point1,o=t.point2,i=-t.path.angle*dr/180;return ur(te(r,i,Ce),te(e,i,Ce),te(n,i,Ce),te(o,i,Ce))},t.prototype.getPath2dByCurves=function(t){var e=new Path2D;return t.map(function(t,n){var r=t.handle1,o=t.handle2,i=t.segment1,a=t.segment2,s=t.useCanvasCurve,u=t.t;(function(t){return 0===t})(n)&&e.moveTo(i.x,i.y);!s&&ar([i,r,o,a],u,e),s&&e.bezierCurveTo(r.x,r.y,o.x,o.y,a.x,a.y)}),e},t.prototype.getPathInitialBounds=function(t){var e,n,r,o,i=this;return t.map(function(t){var a=i.getCurveInitialBounds(t),s=a.left,u=a.right,c=a.top,p=a.bottom;e=l()(e)?s:e,n=l()(n)?u:n,r=l()(r)?c:r,o=l()(o)?p:o,s<e&&(e=s);u>n&&(n=u);c<r&&(r=c);p>o&&(o=p)}),{left:e,right:n,top:r,bottom:o}},t.prototype.getPathItemCenter=function(t){var e=t.curves,n=t.radian,r=this.getPathInitialBounds(e),o=this.getBoundsCenter(r);return te(o,n,Ce)},t.prototype.getPathBounds=function(t){var e,n,r,o;return t.map(function(t){var i=t.bounds,a=i.left,s=i.right,u=i.top,c=i.bottom;e=l()(e)?a:e,n=l()(n)?s:n,r=l()(r)?u:r,o=l()(o)?c:o,a<e&&(e=a);s>n&&(n=s);u<r&&(r=u);c>o&&(o=c)}),{left:e,right:n,top:r,bottom:o}},t.prototype.getBoundsCenter=function(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}},t.prototype.getTranslatedBounds=function(t,e,n){var r=t.left,o=t.top;return{left:r+e,right:t.right+e,top:o+n,bottom:t.bottom+n}},t.prototype.getMultipiedPoint=function(t,e,n){return l()(n)&&(n=e),{x:t.x*e,y:t.y*n}},t.prototype.getTranslatedPoint=function(t,e,n){return{x:t.x+e,y:t.y+n}},t.prototype.getTwoPointsLine=function(t){var e=[];return t.length>=2&&t.map(function(t,n,r){if(!Et(n,r)){var o={source:t,target:r[n+1]};e.push(o)}}),e},t}()),vr=Math.PI,br=function(){function t(t){this.getters=t}return t.prototype.renderPoint=function(t,e){return function(t,e,n){void 0===n&&(n="red");var r=e.getContext("2d");r.save();var o=t.x,i=t.y;r.beginPath(),r.arc(o,i,5,0,2*vr),r.fillStyle=n,r.fill(),r.restore()}(t,this.getters.canvas,e)},t.prototype.renderPoints=function(t,e){var n=this;t.map(function(t){return n.renderPoint(t,e)})},t.prototype.delayRenderPoint=function(t,e){var n=this;setTimeout(function(){n.renderPoint(t,e)},1)},t.prototype.delayRenderPoints=function(t,e){var n=this;t.map(function(t){return n.delayRenderPoint(t,e)})},t}(),mr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pr=function(t){function e(e){var n=t.call(this,e)||this;return n.type=_t,n.show=!1,n.miniMap=e.miniMap,n}return mr(e,t),Object.defineProperty(e.prototype,"initialRatio",{get:function(){var t=this.getters,e=t.canvasWidth,n=t.canvasHeight,r=this.miniMap,o=e/r.width,i=n/r.height;return o>i?o:i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicCenter",{get:function(){var t=this.miniMap,e=t.left,n=t.top;return{x:e+t.width/2,y:n+t.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){var t=this.initialRatio,e=this.getters.viewPort,n=e.zoom,r=e.panX,o=e.panY,i=this.basicCenter;return{x:i.x-r/t/n,y:i.y-o/t/n}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicLeft",{get:function(){var t=this.miniMap;return t.left+t.width/2-this.basicWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicTop",{get:function(){var t=this.miniMap;return t.top+t.height/2-this.basicHeight/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicWidth",{get:function(){var t=this.initialRatio;return this.getters.canvasWidth/t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicHeight",{get:function(){var t=this.initialRatio;return this.getters.canvasHeight/t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.basicWidth/this.getters.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.basicHeight/this.getters.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.center,e=t.x,n=t.y,r=this.width,o=this.height,i=new Path2D;return i.rect(e-r/2,n-o/2,r,o),i},enumerable:!0,configurable:!0}),e.prototype.contain=function(t,e){this.getters.renderer.resetTransform();var n=this.getters.viewPort.transform({x:t,y:e});return this.show&&this.getters.ctx.isPointInPath(this.path2d,n.x,n.y)},e.prototype.render=function(){var t=this.getters.ctx;t.save(),t.lineWidth=1,t.strokeStyle="red",t.stroke(this.path2d),t.restore()},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.initialRatio,n=this.getters.zoom,r=-(t.x-this.dragger.prevEvent.x)*e*n,o=-(t.y-this.dragger.prevEvent.y)*e*n;this.getters.viewPort.panBy(r,o)}},e}(Ft),_r=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wr=function(t){function e(e){var n=t.call(this,e)||this;n.type=Pt,n.left=0,n.top=0,n.width=0,n.height=0,n.show=!1,n.renderingMainCells=!1,n.preventDefaultCellsRenderInMiniMap=!1,n.shouldRender=G(e.shouldRender)?e.shouldRender:n.shouldRender;var r=n.drawStore.setting,o=r.miniMapWidth,i=r.miniMapHeight;return n.width=G(o)?o:300,n.height=G(i)?i:200,n.left=n.getters.canvasRight-n.width,n.top=n.getters.canvasHeight-n.height,n.viewBox=new Pr({draw:n.draw,miniMap:n}),n}return _r(e,t),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.left,e=this.top,n=this.width,r=this.height,o=new Path2D;return o.rect(t,e,n,r),o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasWidthInMiniMap",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasHeightInMiniMap",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewBoxBasicPanelPath2d",{get:function(){var t=this.getters,e=t.canvasWidth,n=t.canvasHeight,r=this.left,o=this.top,i=this.width,a=this.height,s=this.viewBox.initialRatio,u=e/s,c=n/s,p=r+i/2-u/2,l=o+a/2-c/2,f=new Path2D;return f.rect(p,l,u,c),f},enumerable:!0,configurable:!0}),e.prototype.enablePreventDefaultCellsRenderInMiniMap=function(){return this.preventDefaultCellsRenderInMiniMap=!0},e.prototype.enableRender=function(){this.shouldRender=!0},e.prototype.disableRender=function(){this.shouldRender=!1},e.prototype.renderMainCells=function(){var t=this.getters,e=t.renderer;t.canvas;this.draw.renderBackground(),e.setTransformViewPortToRenderMiniMap(),this.renderingMainCells=!0,this.draw.renderMain(),this.renderingMainCells=!1},e.prototype.render=function(){var t=this.getters.ctx,e=this.viewBox,n=e.basicLeft,r=e.basicTop;t.save(),t.fillStyle="#181b20",t.fill(this.path2d),t.strokeStyle="#181b20",t.stroke(this.path2d),f(this.imageDataInRigion)&&t.putImageData(this.imageDataInRigion,n,r),t.restore()},e.prototype.contain=function(t,e){this.getters.renderer.resetTransform();var n=this.getters.viewPort.transform({x:t,y:e});return this.show&&this.getters.ctx.isPointInPath(this.path2d,n.x,n.y)},e.prototype.renderViewBoxBasicPanel=function(){var t=this.getters.ctx;t.save(),t.fillStyle="white",t.fill(this.viewBoxBasicPanelPath2d),t.restore()},e.prototype.saveImageDataInRigion=function(){var t=this.viewBox,e=t.basicWidth,n=t.basicHeight,r=t.basicLeft,o=t.basicTop;this.imageDataInRigion=this.getters.ctx.getImageData(r,o,e,n)},e}(Ft),xr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Or=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("input"),n.input.type="text",n.input.style.position="fixed",n.input.style.zIndex="100000000000000",n.hide(),n}return xr(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.input.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowing",{get:function(){return"none"!==this.input.style.display},enumerable:!0,configurable:!0}),e.prototype.bindEvents=function(){var t=this,e=this.input;function n(){t.handleBlur&&t.handleBlur(),t.hideSelfAndUpdateTarget()}e.removeEventListener("blur",n),e.addEventListener("blur",n)},e.prototype.handleBlur=function(){},e.prototype.hide=function(){this.input.style.display="none"},e.prototype.show=function(){this.input.style.display="inline-block"},e.prototype.focus=function(){this.input.focus()},e.prototype.updateProp=function(t){var e=t.left,n=t.top,r=t.text,o=this.input;f(e)&&(o.style.left=e+"px"),f(n)&&(o.style.top=n+"px"),f(r)&&(o.value=r)},e.prototype.hideSelfAndUpdateTarget=function(){var t=this.target,e=this.value;this.hide(),f(t)&&(this.sharedActions.updateTheTextOfDrawText(t,e),this.draw.render())},e}(h),Sr=function(){function t(t,e){void 0===e&&(e={});var n=e.isExtended;e.showMiniMap;if(!n){this.drawStore=new Ct,this.getters=new jt(this.drawStore),this.actions=new tr(this.drawStore,this.getters),this.actions.UPDATE_CANVAS(t),this.actions.UPDATE_SETTING(e),this._initialize();var r=new q({draw:this});this.actions.UPDATE_INTERACTION(r)}}return t.prototype._initialize=function(){var t=document.createElement("canvas");t.width=1e3,t.height=1e3,this.actions.UPDATE_TMP_CANVAS(t),this.actions.INTIALIZE_DRAW_ROOT_ID();var e=new br(this.getters);this.actions.UPDATE_TEST_UTILS(e),this.sharedGetters=new yr,this.sharedActions=new ir(this.drawStore,this.getters),this.actions.UPDATE_DRAW(this);var n=new st({draw:this});this.actions.UPDATE_VIEWPORT(n);var r=new ft({draw:this});this.actions.UPDATE_RENDERER(r);var o=new v({draw:this});this.actions.UPDATE_SELECTOR(o);var i=this.drawStore.setting.showMiniMap,a=new wr({draw:this,shouldRender:i});this.actions.UPDATE_MINIMAP(a);var s=new pt({draw:this,canvas:this.getters.canvas});this.actions.UPDATE_GRID(s),G(this.drawStore.textInput)&&G(this.drawStore.textInput.input)&&this.drawStore.textInput.input.remove();var u=new Or({draw:this});this.actions.UPDATE_TEXT_INPUT(u),this.actions.MODIFY_ACTIVE_PANEL_ID(this.getters.storeActivePanelId),this.actions.APPEND_TEXT_INPUT_TO_DOCUMENT_BODY()},t.prototype.render=function(){var t=this.getters,e=t.renderer,n=t.miniMap,r=n.shouldRender;e.clear(),r&&(n.renderMainCells(),n.saveImageDataInRigion(),e.clear()),this.renderBackground(),e.setTransformViewPort(),this.renderMain(),r&&(this.getters.renderer.resetTransform(),this.getters.miniMap.render())},t.prototype.renderBackground=function(){},t.prototype.renderMain=function(){var t=this.getters.miniMap.renderingMainCells,e=this.sharedActions.renderElement;this.getters.cellListShouldRender.map(function(n){return e(n,t)}),this.getters.selector.render()},t.prototype.addElement=function(t,e,n){return this.actions.ADD_ELEMENT(this,t,e,n)},t.prototype.removeElement=function(t){this.actions.REMOVE_ELEMENT(t)},t.prototype.attachDrawToElement=function(t){},t.prototype.importData=function(t){var e=this,n=JSON.parse(t),r=n.rootId,o=n.elements;this.actions.UPDATE_DRAW_ROOT_ID(r),o.map(function(t){var n=t.data;return e.actions.ADD_ELEMENT(e,n.type,n,"")}),this.render()},t.prototype.exportData=function(t){void 0===t&&(t=o()),this.actions.REFRESH_SYNC_STORE_ROOT_ID(),this.actions.REFRESH_SYNC_STORE_ELEMENTS();var e=this.drawStore.syncStore,n=JSON.stringify(e);r(n,t+".json")},t}();window.Draw=Sr;e.default=Sr}]);